Return-Path: <linux-cifs-owner@vger.kernel.org>
X-Original-To: lists+linux-cifs@lfdr.de
Delivered-To: lists+linux-cifs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 45D52326C34
	for <lists+linux-cifs@lfdr.de>; Sat, 27 Feb 2021 09:14:01 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229946AbhB0INp (ORCPT <rfc822;lists+linux-cifs@lfdr.de>);
        Sat, 27 Feb 2021 03:13:45 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:52694 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229864AbhB0INl (ORCPT
        <rfc822;linux-cifs@vger.kernel.org>); Sat, 27 Feb 2021 03:13:41 -0500
Received: from mail-lf1-x12c.google.com (mail-lf1-x12c.google.com [IPv6:2a00:1450:4864:20::12c])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 36356C06174A
        for <linux-cifs@vger.kernel.org>; Sat, 27 Feb 2021 00:13:01 -0800 (PST)
Received: by mail-lf1-x12c.google.com with SMTP id d3so17378078lfg.10
        for <linux-cifs@vger.kernel.org>; Sat, 27 Feb 2021 00:13:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:from:date:message-id:subject:to:cc;
        bh=l8yjvGadR6AoGzW9i4/uTXyz661ic6d+j5Ldu1HCuds=;
        b=OnYugKGDM0RLYnu+I/25bMGLduJ9QDI+biLi4w/6adnpaQoUpF8ixfZnEmbsClWMgu
         23LPW4/JSDLnXqgclcAs0JGn0U5QsfKo45LL1wcPQ45agPZ3Lw73Co4UfYGRO5ziaZLQ
         lw9Z6upWWyK0ZDtDoCk5YuLJfvxkZhLRo3RYDyf9mGpCXba/iX00EJD2ty5egOD0Ibf7
         XYjgHgp9xPgMKfTMFduYoOts6eCp4QNrKS3Cc2hzhfObE4d5mOxvaexf0qeNQBraWcmd
         GW7xNrm5Iqasq7sLC6/ycXdasA2vhDD4HmA8+n6VMNBsGdnALmXHFrkS0QHwosL+TPe0
         whfA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:from:date:message-id:subject:to:cc;
        bh=l8yjvGadR6AoGzW9i4/uTXyz661ic6d+j5Ldu1HCuds=;
        b=JWKLxdTRMXchDoTf/y8xrF0Pmh3Rwz0S6V6nP2zlwTeyRGssfxja2DlTVxYrEoKx1R
         YtekgsQ72c7+SwEH6r12+4/dRCYnvMenlDRUtByaSUTuarbVM97fV1GiHCaSV/gANT+C
         rjZSNvi2V5jN5oeWmJMLgbBcI6c3riz0nHtOhjdZwNuzkuhAuciPx9vpft1mxuodyIxh
         Ce4uu4K0jpm34U2P8udcXLrzqgkofz/zQcrK+u/8eIeMv9RA1dzZ145fJ6T/wd/V1ra3
         k9X88REEFqWmTLPPGHlg/h2Q/zMhSZ4kzJJsWFwl/XQBE+hmllLjT01zhINbRpXi8Ssu
         WlNg==
X-Gm-Message-State: AOAM5302hA35Yb+5L4EUq7kt9MNQSgXLCLZRE/55bwbHXPfdozsbenO9
        dbmcjrPGulfs/gcoQvDdDPl/1UrhhIIueKZbnHgml/NelF9zPA==
X-Google-Smtp-Source: ABdhPJweb+JzmXLy77fKd/uSI9f4ijtjm+z4rac+E7/gDv0r+zvUwI/JjsEBUrO/VZVDBKc44XvrOmo9L2LplyHFjCA=
X-Received: by 2002:a05:6512:31c1:: with SMTP id j1mr3983739lfe.313.1614413579440;
 Sat, 27 Feb 2021 00:12:59 -0800 (PST)
MIME-Version: 1.0
From:   Steve French <smfrench@gmail.com>
Date:   Sat, 27 Feb 2021 02:12:48 -0600
Message-ID: <CAH2r5mtZW18Wq=mnU9MKH0eL-1wCKXTRGt00E-X32_dJ_H1F9w@mail.gmail.com>
Subject: [PATCH v2] smb3: allow files to be created with backslash in name
To:     CIFS <linux-cifs@vger.kernel.org>
Cc:     Xiaoli Feng <xifeng@redhat.com>,
        ronnie sahlberg <ronniesahlberg@gmail.com>
Content-Type: multipart/mixed; boundary="000000000000ecaec505bc4cf3fa"
Precedence: bulk
List-ID: <linux-cifs.vger.kernel.org>
X-Mailing-List: linux-cifs@vger.kernel.org

--000000000000ecaec505bc4cf3fa
Content-Type: text/plain; charset="UTF-8"

Backslash is reserved in Windows (and SMB2/SMB3 by default) but
allowed in POSIX so must be remapped when POSIX extensions are
not enabled.

The default mapping for SMB3 mounts ("SFM") allows mapping backslash
(ie 0x5C in UTF8) to 0xF026 in UCS-2 (using the Unicode remapping
range reserved for these characters), but this was not mapped by
cifs.ko (unlike asterisk, greater than, question mark etc).  This patch
fixes that to allow creating files and directories with backslash
in the file or directory name.

Before this patch:
   touch "/mnt2/subdir/filewith\slash"
would return
   touch: setting times of '/mnt2/subdir/filewith\slash': Invalid argument

With the patch tReported-by: Xiaoli Feng <xifeng@redhat.com>ouch and
mkdir with the backslash in the name works.

Version two of the patch works with files in subdirectories not just
the root of the share.

This problem was found while debugging xfstest generic/453
    https://bugzilla.kernel.org/show_bug.cgi?id=210961

Reported-by: Xiaoli Feng <xifeng@redhat.com>

--
Thanks,

Steve

--000000000000ecaec505bc4cf3fa
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0001-smb3-allow-files-to-be-created-with-backslash-in-nam.patch"
Content-Disposition: attachment; 
	filename="0001-smb3-allow-files-to-be-created-with-backslash-in-nam.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_klng46am0>
X-Attachment-Id: f_klng46am0

RnJvbSA5NWM1ZDA2MDdhNTRmMDI1NTFiZGQ5ZWNjN2Y0MWIxZDM1YjE5MjExIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBTdGV2ZSBGcmVuY2ggPHN0ZnJlbmNoQG1pY3Jvc29mdC5jb20+
CkRhdGU6IFNhdCwgMjcgRmViIDIwMjEgMDI6MDE6NDYgLTA2MDAKU3ViamVjdDogW1BBVENIXSBz
bWIzOiBhbGxvdyBmaWxlcyB0byBiZSBjcmVhdGVkIHdpdGggYmFja3NsYXNoIGluIG5hbWUKCkJh
Y2tzbGFzaCBpcyByZXNlcnZlZCBpbiBXaW5kb3dzIChhbmQgU01CMi9TTUIzIGJ5IGRlZmF1bHQp
IGJ1dAphbGxvd2VkIGluIFBPU0lYIHNvIG11c3QgYmUgcmVtYXBwZWQgd2hlbiBQT1NJWCBleHRl
bnNpb25zIGFyZQpub3QgZW5hYmxlZC4KClRoZSBkZWZhdWx0IG1hcHBpbmcgZm9yIFNNQjMgbW91
bnRzICgiU0ZNIikgYWxsb3dzIG1hcHBpbmcgYmFja3NsYXNoCihpZSAweDVDIGluIFVURjgpIHRv
IDB4RjAyNiBpbiBVQ1MtMiAodXNpbmcgdGhlIFVuaWNvZGUgcmVtYXBwaW5nCnJhbmdlIHJlc2Vy
dmVkIGZvciB0aGVzZSBjaGFyYWN0ZXJzKSwgYnV0IHRoaXMgd2FzIG5vdCBtYXBwZWQgYnkKY2lm
cy5rbyAodW5saWtlIGFzdGVyaXNrLCBncmVhdGVyIHRoYW4sIHF1ZXN0aW9uIG1hcmsgZXRjKS4g
IFRoaXMgcGF0Y2gKZml4ZXMgdGhhdCB0byBhbGxvdyBjcmVhdGluZyBmaWxlcyBhbmQgZGlyZWN0
b3JpZXMgd2l0aCBiYWNrc2xhc2gKaW4gdGhlIGZpbGUgb3IgZGlyZWN0b3J5IG5hbWUuCgpCZWZv
cmUgdGhpcyBwYXRjaDoKICAgdG91Y2ggIi9tbnQyL2ZpbGV3aXRoXHNsYXNoIgp3b3VsZCByZXR1
cm4KICAgdG91Y2g6IHNldHRpbmcgdGltZXMgb2YgJy9tbnQyL2ZpbGV3aXRoXHNsYXNoJzogSW52
YWxpZCBhcmd1bWVudAoKV2l0aCB0aGUgcGF0Y2ggdG91Y2ggYW5kIG1rZGlyIHdpdGggdGhlIGJh
Y2tzbGFzaCBpbiB0aGUgbmFtZSB3b3Jrcy4KClRoaXMgcHJvYmxlbSB3YXMgZm91bmQgd2hpbGUg
ZGVidWdnaW5nIHhmc3Rlc3QgZ2VuZXJpYy80NTMKICAgIGh0dHBzOi8vYnVnemlsbGEua2VybmVs
Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjEwOTYxCgpSZXBvcnRlZC1ieTogWGlhb2xpIEZlbmcgPHhp
ZmVuZ0ByZWRoYXQuY29tPgpTaWduZWQtb2ZmLWJ5OiBTdGV2ZSBGcmVuY2ggPHN0ZnJlbmNoQG1p
Y3Jvc29mdC5jb20+Ci0tLQogZnMvY2lmcy9jaWZzX3VuaWNvZGUuYyB8IDE1ICsrKysrKysrKyst
LS0tLQogZnMvY2lmcy9jaWZzX3VuaWNvZGUuaCB8ICAzICsrKwogZnMvY2lmcy9jaWZzZ2xvYi5o
ICAgICB8ICA1ICstLS0tCiBmcy9jaWZzL2Rpci5jICAgICAgICAgIHwgMTggKysrKysrKysrKysr
LS0tLS0tCiBmcy9jaWZzL21pc2MuYyAgICAgICAgIHwgIDIgKy0KIGZzL2NpZnMvc21iMm1pc2Mu
YyAgICAgfCAxOCArKysrKysrKysrKy0tLS0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgMzggaW5zZXJ0
aW9ucygrKSwgMjMgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZnMvY2lmcy9jaWZzX3VuaWNv
ZGUuYyBiL2ZzL2NpZnMvY2lmc191bmljb2RlLmMKaW5kZXggOWJkMDNhMjMxMDMyLi40ODk4YjE1
NTM3OTYgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvY2lmc191bmljb2RlLmMKKysrIGIvZnMvY2lmcy9j
aWZzX3VuaWNvZGUuYwpAQCAtOTgsNiArOTgsOSBAQCBjb252ZXJ0X3NmbV9jaGFyKGNvbnN0IF9f
dTE2IHNyY19jaGFyLCBjaGFyICp0YXJnZXQpCiAJY2FzZSBTRk1fUEVSSU9EOgogCQkqdGFyZ2V0
ID0gJy4nOwogCQlicmVhazsKKwljYXNlIFNGTV9TTEFTSDoKKwkJKnRhcmdldCA9ICdcXCc7CisJ
CWJyZWFrOwogCWRlZmF1bHQ6CiAJCXJldHVybiBmYWxzZTsKIAl9CkBAIC00MzEsNiArNDM0LDkg
QEAgc3RhdGljIF9fbGUxNiBjb252ZXJ0X3RvX3NmbV9jaGFyKGNoYXIgc3JjX2NoYXIsIGJvb2wg
ZW5kX29mX3N0cmluZykKIAljYXNlICd8JzoKIAkJZGVzdF9jaGFyID0gY3B1X3RvX2xlMTYoU0ZN
X1BJUEUpOwogCQlicmVhazsKKwljYXNlICdcXCc6CisJCWRlc3RfY2hhciA9IGNwdV90b19sZTE2
KFNGTV9TTEFTSCk7CisJCWJyZWFrOwogCWNhc2UgJy4nOgogCQlpZiAoZW5kX29mX3N0cmluZykK
IAkJCWRlc3RfY2hhciA9IGNwdV90b19sZTE2KFNGTV9QRVJJT0QpOwpAQCAtNDQzLDYgKzQ0OSw5
IEBAIHN0YXRpYyBfX2xlMTYgY29udmVydF90b19zZm1fY2hhcihjaGFyIHNyY19jaGFyLCBib29s
IGVuZF9vZl9zdHJpbmcpCiAJCWVsc2UKIAkJCWRlc3RfY2hhciA9IDA7CiAJCWJyZWFrOworCWNh
c2UgJy8nOgorCQlkZXN0X2NoYXIgPSBjcHVfdG9fbGUxNihVQ1MyX1NMQVNIKTsKKwkJYnJlYWs7
CiAJZGVmYXVsdDoKIAkJZGVzdF9jaGFyID0gMDsKIAl9CkBAIC01MDIsMTEgKzUxMSw3IEBAIGNp
ZnNDb252ZXJ0VG9VVEYxNihfX2xlMTYgKnRhcmdldCwgY29uc3QgY2hhciAqc291cmNlLCBpbnQg
c3JjbGVuLAogCQkJZHN0X2NoYXIgPSBjb252ZXJ0X3RvX3NmbV9jaGFyKHNyY19jaGFyLCBlbmRf
b2Zfc3RyaW5nKTsKIAkJfSBlbHNlCiAJCQlkc3RfY2hhciA9IDA7Ci0JCS8qCi0JCSAqIEZJWE1F
OiBXZSBjYW4gbm90IGhhbmRsZSByZW1hcHBpbmcgYmFja3NsYXNoIChVTklfU0xBU0gpCi0JCSAq
IHVudGlsIGFsbCB0aGUgY2FsbHMgdG8gYnVpbGRfcGF0aF9mcm9tX2RlbnRyeSBhcmUgbW9kaWZp
ZWQsCi0JCSAqIGFzIHRoZXkgdXNlIGJhY2tzbGFzaCBhcyBzZXBhcmF0b3IuCi0JCSAqLworCiAJ
CWlmIChkc3RfY2hhciA9PSAwKSB7CiAJCQljaGFybGVuID0gY3AtPmNoYXIydW5pKHNvdXJjZSAr
IGksIHNyY2xlbiAtIGksICZ0bXApOwogCQkJZHN0X2NoYXIgPSBjcHVfdG9fbGUxNih0bXApOwpk
aWZmIC0tZ2l0IGEvZnMvY2lmcy9jaWZzX3VuaWNvZGUuaCBiL2ZzL2NpZnMvY2lmc191bmljb2Rl
LmgKaW5kZXggODBiM2Q4NDU0MTlmLi44Y2Q1OGM3MWNiYjYgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMv
Y2lmc191bmljb2RlLmgKKysrIGIvZnMvY2lmcy9jaWZzX3VuaWNvZGUuaApAQCAtMjQsNiArMjQs
OSBAQAogCiAjZGVmaW5lICBVTklVUFJfTk9MT1dFUgkJLyogRXhhbXBsZSB0byBub3QgZXhwYW5k
IGxvd2VyIGNhc2UgdGFibGVzICovCiAKKy8qIFVuaWNvZGUgZW5jb2Rpbmcgb2YgYmFja3NsYXNo
IGNoYXJhY3RlciAqLworI2RlZmluZSBVQ1MyX1NMQVNIIDB4MDA1QworCiAvKgogICogV2luZG93
cyBtYXBzIHRoZXNlIHRvIHRoZSB1c2VyIGRlZmluZWQgMTYgYml0IFVuaWNvZGUgcmFuZ2Ugc2lu
Y2UgdGhleSBhcmUKICAqIHJlc2VydmVkIHN5bWJvbHMgKGFsb25nIHdpdGggXCBhbmQgLyksIG90
aGVyd2lzZSBpbGxlZ2FsIHRvIHN0b3JlCmRpZmYgLS1naXQgYS9mcy9jaWZzL2NpZnNnbG9iLmgg
Yi9mcy9jaWZzL2NpZnNnbG9iLmgKaW5kZXggM2RlM2M1OTA4YTcyLi45NWJkOTgwZWM4NDkgMTAw
NjQ0Ci0tLSBhL2ZzL2NpZnMvY2lmc2dsb2IuaAorKysgYi9mcy9jaWZzL2NpZnNnbG9iLmgKQEAg
LTE0MzAsMTAgKzE0MzAsNyBAQCBDSUZTX0ZJTEVfU0Ioc3RydWN0IGZpbGUgKmZpbGUpCiAKIHN0
YXRpYyBpbmxpbmUgY2hhciBDSUZTX0RJUl9TRVAoY29uc3Qgc3RydWN0IGNpZnNfc2JfaW5mbyAq
Y2lmc19zYikKIHsKLQlpZiAoY2lmc19zYi0+bW50X2NpZnNfZmxhZ3MgJiBDSUZTX01PVU5UX1BP
U0lYX1BBVEhTKQotCQlyZXR1cm4gJy8nOwotCWVsc2UKLQkJcmV0dXJuICdcXCc7CisJcmV0dXJu
ICcvJzsKIH0KIAogc3RhdGljIGlubGluZSB2b2lkCmRpZmYgLS1naXQgYS9mcy9jaWZzL2Rpci5j
IGIvZnMvY2lmcy9kaXIuYwppbmRleCA5N2FjMzYzYjVkZjEuLmJiYTBmYTFjMTE4YiAxMDA2NDQK
LS0tIGEvZnMvY2lmcy9kaXIuYworKysgYi9mcy9jaWZzL2Rpci5jCkBAIC0yMDksMTIgKzIwOSwx
OCBAQCBjaGVja19uYW1lKHN0cnVjdCBkZW50cnkgKmRpcmVudHJ5LCBzdHJ1Y3QgY2lmc190Y29u
ICp0Y29uKQogCQkgICAgIGxlMzJfdG9fY3B1KHRjb24tPmZzQXR0ckluZm8uTWF4UGF0aE5hbWVD
b21wb25lbnRMZW5ndGgpKSkKIAkJcmV0dXJuIC1FTkFNRVRPT0xPTkc7CiAKLQlpZiAoIShjaWZz
X3NiLT5tbnRfY2lmc19mbGFncyAmIENJRlNfTU9VTlRfUE9TSVhfUEFUSFMpKSB7Ci0JCWZvciAo
aSA9IDA7IGkgPCBkaXJlbnRyeS0+ZF9uYW1lLmxlbjsgaSsrKSB7Ci0JCQlpZiAoZGlyZW50cnkt
PmRfbmFtZS5uYW1lW2ldID09ICdcXCcpIHsKLQkJCQljaWZzX2RiZyhGWUksICJJbnZhbGlkIGZp
bGUgbmFtZVxuIik7Ci0JCQkJcmV0dXJuIC1FSU5WQUw7Ci0JCQl9CisJLyoKKwkgKiBTTUIzLjEu
MSBQT1NJWCBFeHRlbnNpb25zLCBDSUZTIFVuaXggRXh0ZW5zaW9ucyBhbmQgU0ZNIG1hcHBpbmdz
CisJICogYWxsb3cgXCBpbiBwYXRocyAob3IgaW4gbGF0dGVyIGNhc2UgcmVtYXBzIFwgdG8gMHhG
MDI2KQorCSAqLworCWlmICgoY2lmc19zYi0+bW50X2NpZnNfZmxhZ3MgJiBDSUZTX01PVU5UX1BP
U0lYX1BBVEhTKSB8fAorCSAgICAoY2lmc19zYi0+bW50X2NpZnNfZmxhZ3MgJiBDSUZTX01PVU5U
X01BUF9TRk1fQ0hSKSkKKwkJcmV0dXJuIDA7CisKKwlmb3IgKGkgPSAwOyBpIDwgZGlyZW50cnkt
PmRfbmFtZS5sZW47IGkrKykgeworCQlpZiAoZGlyZW50cnktPmRfbmFtZS5uYW1lW2ldID09ICdc
XCcpIHsKKwkJCWNpZnNfZGJnKEZZSSwgIkludmFsaWQgZmlsZSBuYW1lXG4iKTsKKwkJCXJldHVy
biAtRUlOVkFMOwogCQl9CiAJfQogCXJldHVybiAwOwpkaWZmIC0tZ2l0IGEvZnMvY2lmcy9taXNj
LmMgYi9mcy9jaWZzL21pc2MuYwppbmRleCA4MmUxNzY3MjBjYTYuLjkzNjE2NDRmNzMxMCAxMDA2
NDQKLS0tIGEvZnMvY2lmcy9taXNjLmMKKysrIGIvZnMvY2lmcy9taXNjLmMKQEAgLTExODYsNyAr
MTE4Niw3IEBAIGludCB1cGRhdGVfc3VwZXJfcHJlcGF0aChzdHJ1Y3QgY2lmc190Y29uICp0Y29u
LCBjaGFyICpwcmVmaXgpCiAJCQlnb3RvIG91dDsKIAkJfQogCi0JCWNvbnZlcnRfZGVsaW1pdGVy
KGNpZnNfc2ItPnByZXBhdGgsIENJRlNfRElSX1NFUChjaWZzX3NiKSk7CisJCWNvbnZlcnRfZGVs
aW1pdGVyKGNpZnNfc2ItPnByZXBhdGgsIENJRlNfRElSX1NFUChjaWZzX3NiKSk7IC8qIEJCIENo
ZWNrIHRoaXMgKi8KIAl9IGVsc2UKIAkJY2lmc19zYi0+cHJlcGF0aCA9IE5VTEw7CiAKZGlmZiAt
LWdpdCBhL2ZzL2NpZnMvc21iMm1pc2MuYyBiL2ZzL2NpZnMvc21iMm1pc2MuYwppbmRleCA2MGQ0
YmQxZWFlMmIuLmNlNGYwMDA2OTY1MyAxMDA2NDQKLS0tIGEvZnMvY2lmcy9zbWIybWlzYy5jCisr
KyBiL2ZzL2NpZnMvc21iMm1pc2MuYwpAQCAtNDc2LDEzICs0NzYsMTcgQEAgY2lmc19jb252ZXJ0
X3BhdGhfdG9fdXRmMTYoY29uc3QgY2hhciAqZnJvbSwgc3RydWN0IGNpZnNfc2JfaW5mbyAqY2lm
c19zYikKIAlpZiAoZnJvbVswXSA9PSAnXFwnKQogCQlzdGFydF9vZl9wYXRoID0gZnJvbSArIDE7
CiAKLQkvKiBTTUIzMTEgUE9TSVggZXh0ZW5zaW9ucyBwYXRocyBkbyBub3QgaW5jbHVkZSBsZWFk
aW5nIHNsYXNoICovCi0JZWxzZSBpZiAoY2lmc19zYl9tYXN0ZXJfdGxpbmsoY2lmc19zYikgJiYK
LQkJIGNpZnNfc2JfbWFzdGVyX3Rjb24oY2lmc19zYiktPnBvc2l4X2V4dGVuc2lvbnMgJiYKLQkJ
IChmcm9tWzBdID09ICcvJykpIHsKLQkJc3RhcnRfb2ZfcGF0aCA9IGZyb20gKyAxOwotCX0gZWxz
ZQotCQlzdGFydF9vZl9wYXRoID0gZnJvbTsKKwlzdGFydF9vZl9wYXRoID0gZnJvbTsKKwkvKgor
CSAqIE9ubHkgb2xkIENJRlMgVW5peCBleHRlbnNpb25zIHBhdGhzIGluY2x1ZGUgbGVhZGluZyBz
bGFzaAorCSAqIE5lZWQgdG8gc2tpcCBpZiBmb3IgU01CMy4xLjEgUE9TSVggRXh0ZW5zaW9ucyBh
bmQgU01CMS8yLzMKKwkgKi8KKwlpZiAoZnJvbVswXSA9PSAnLycpIHsKKwkJaWYgKCgoY2lmc19z
Yi0+bW50X2NpZnNfZmxhZ3MgJiBDSUZTX01PVU5UX1BPU0lYX1BBVEhTKSA9PSBmYWxzZSkgfHwK
KwkJICAgIChjaWZzX3NiX21hc3Rlcl90bGluayhjaWZzX3NiKSAmJgorCQkgICAgIChjaWZzX3Ni
X21hc3Rlcl90Y29uKGNpZnNfc2IpLT5wb3NpeF9leHRlbnNpb25zKSkpCisJCQlzdGFydF9vZl9w
YXRoID0gZnJvbSArIDE7CisJfQogCiAJdG8gPSBjaWZzX3N0cm5kdXBfdG9fdXRmMTYoc3RhcnRf
b2ZfcGF0aCwgUEFUSF9NQVgsICZsZW4sCiAJCQkJICAgY2lmc19zYi0+bG9jYWxfbmxzLCBtYXBf
dHlwZSk7Ci0tIAoyLjI3LjAKCg==
--000000000000ecaec505bc4cf3fa--
