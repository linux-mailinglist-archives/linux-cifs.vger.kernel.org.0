Return-Path: <linux-cifs-owner@vger.kernel.org>
X-Original-To: lists+linux-cifs@lfdr.de
Delivered-To: lists+linux-cifs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 56C922952E7
	for <lists+linux-cifs@lfdr.de>; Wed, 21 Oct 2020 21:25:17 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2441998AbgJUTZQ (ORCPT <rfc822;lists+linux-cifs@lfdr.de>);
        Wed, 21 Oct 2020 15:25:16 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:54640 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S2441904AbgJUTZQ (ORCPT
        <rfc822;linux-cifs@vger.kernel.org>); Wed, 21 Oct 2020 15:25:16 -0400
Received: from mail-lf1-x12a.google.com (mail-lf1-x12a.google.com [IPv6:2a00:1450:4864:20::12a])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id C63DFC0613CE
        for <linux-cifs@vger.kernel.org>; Wed, 21 Oct 2020 12:25:15 -0700 (PDT)
Received: by mail-lf1-x12a.google.com with SMTP id h6so4590380lfj.3
        for <linux-cifs@vger.kernel.org>; Wed, 21 Oct 2020 12:25:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:from:date:message-id:subject:to;
        bh=YscgVhrgX1n+qv6NeSw/SX7usg/IlZJJRICvXejuPZY=;
        b=azv24Kqo/SNpLAe0MEO6IwfV/dm163ZWFKtCD497hd7Z5T8n/8OzJKJGHdxiq9FpCd
         IBem/ZB6lMdjyjchbXC0TZfC4fQUCM2fYJGqU7662FqJqbtB/cFAUJMXr3qwXmbErMXe
         zfwTv6MvAgRM/YOxa8b6uJAJJiJESowgTI9RAUXNEMQ95+fgWKb0IEyelURaBscGnmet
         IZcxlafXGtq0Ol6M1uRk5aMmCRW6SK8kI8ln4CX8NxEbdGUq8poYNwAe9wNswEyDvsdI
         mjt+6B8I0dMUXOB3q+nwSuWjW3NxJT959urRYi5I4phgmoYfXdV4HDaZBx1sxS9hq5YP
         2RrQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:from:date:message-id:subject:to;
        bh=YscgVhrgX1n+qv6NeSw/SX7usg/IlZJJRICvXejuPZY=;
        b=NzzZD4AZg0AwtA3qOzGrNzf2j97Rm1UdQkeCylIBTOxagsKkMzpttsAJXs2i1XjqEH
         CywBG2W40NMmuSeQ9J7jjL4cRfmi3/UK+WOjsiB+3RmgQ9h0VbvPqe73fs3rOq2b4ATN
         a46or0fa7DwYrYz300rKsStCVWHcaux/teGApMF0BuQU/hX/sFijlAjVSyXRlBqmAXE/
         uypP/tZxfZ/3aifoR9TYEKyWb9G38wXpsXQunBkoi16aZehXaUQB8VwdRodLPOnPoNL4
         qJR9PHkDp/W32SMLQp1ZpXkRb4rM9RJXvBrAe7zdYIinKFoR63BpzgUC7+oSzD4rSD/s
         6soA==
X-Gm-Message-State: AOAM532jjVefcR2xsA2+4CNIN5zFOEkCSDhzCwvjuN7uxSc2bXB5UkMm
        zZBKG14gMUkwjr7rUHBya950xOPIq8gLc+kZuuk=
X-Google-Smtp-Source: ABdhPJz0gzMCNX9hsplR9juau2n7UUggziRpcAlz3DMxAvmaAPnsruqRX6CWjAmut4Pn6CCpqP7oN4MgqiWvS4wNQXE=
X-Received: by 2002:a19:c68a:: with SMTP id w132mr1720385lff.106.1603308312201;
 Wed, 21 Oct 2020 12:25:12 -0700 (PDT)
MIME-Version: 1.0
From:   Steve French <smfrench@gmail.com>
Date:   Wed, 21 Oct 2020 14:25:01 -0500
Message-ID: <CAH2r5muuy22vvUvJuz8njz3ymkign0BpNv=Xgj6jG7zqXhAZmA@mail.gmail.com>
Subject: Updated cifs new mount API prep patches
To:     =?UTF-8?Q?Aur=C3=A9lien_Aptel?= <aaptel@suse.com>,
        David Howells <dhowells@redhat.com>,
        CIFS <linux-cifs@vger.kernel.org>,
        ronnie sahlberg <ronniesahlberg@gmail.com>
Content-Type: multipart/mixed; boundary="0000000000006a3fa405b2334e83"
Precedence: bulk
List-ID: <linux-cifs.vger.kernel.org>
X-Mailing-List: linux-cifs@vger.kernel.org

--0000000000006a3fa405b2334e83
Content-Type: text/plain; charset="UTF-8"

As Aurelien and others had mentioned, shrinking fs/cifs/connect.c by
moving mount related functions (to fs_context.c and fs_context.h)
helps make fs/cifs/connect.c more readable (see attached patch series)
but also will make it easier to review the future patches to move
cifs.ko to the new API.   These are low risk and will make the mount
code easier to maintain. These four don't change any existing
function.



-- 
Thanks,

Steve

--0000000000006a3fa405b2334e83
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0003-cifs-move-cache-mount-options-to-fs_context.ch.patch"
Content-Disposition: attachment; 
	filename="0003-cifs-move-cache-mount-options-to-fs_context.ch.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_kgjsd3191>
X-Attachment-Id: f_kgjsd3191

RnJvbSAyY2MzMTQ5NTU2MGYwMGM5ZDEzYWExMWFmNmU3M2RhMGVlNTQ5YTcyIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBSb25uaWUgU2FobGJlcmcgPGxzYWhsYmVyQHJlZGhhdC5jb20+
CkRhdGU6IFdlZCwgMjEgT2N0IDIwMjAgMTE6MzA6MzUgKzEwMDAKU3ViamVjdDogW1BBVENIIDMv
NF0gY2lmczogbW92ZSBjYWNoZSBtb3VudCBvcHRpb25zIHRvIGZzX2NvbnRleHQuY2gKCkhlbHBz
IHRvIHNocmluayBjb25uZWN0LmMgYW5kIG1ha2UgaXQgbW9yZSByZWFkYWJsZQpieSBtb3Zpbmcg
bW91bnQgcmVsYXRlZCBjb2RlIHRvIGZzX2NvbnRleHQuYyBhbmQKZnNfY29udGV4dC5odwoKU2ln
bmVkLW9mZi1ieTogUm9ubmllIFNhaGxiZXJnIDxsc2FobGJlckByZWRoYXQuY29tPgpTaWduZWQt
b2ZmLWJ5OiBTdGV2ZSBGcmVuY2ggPHN0ZnJlbmNoQG1pY3Jvc29mdC5jb20+Ci0tLQogZnMvY2lm
cy9jb25uZWN0LmMgICAgfCA2MiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQogZnMvY2lmcy9mc19jb250ZXh0LmMgfCA1MiArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrCiBmcy9jaWZzL2ZzX2NvbnRleHQuaCB8IDExICsrKysrKysrCiAzIGZp
bGVzIGNoYW5nZWQsIDYzIGluc2VydGlvbnMoKyksIDYyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2ZzL2NpZnMvY29ubmVjdC5jIGIvZnMvY2lmcy9jb25uZWN0LmMKaW5kZXggYzJhOTJlMjZm
ZWY0Li5mN2VmMzhhOWRhZmEgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvY29ubmVjdC5jCisrKyBiL2Zz
L2NpZnMvY29ubmVjdC5jCkBAIC0yODAsMjUgKzI4MCw2IEBAIHN0YXRpYyBjb25zdCBtYXRjaF90
YWJsZV90IGNpZnNfbW91bnRfb3B0aW9uX3Rva2VucyA9IHsKIAl7IE9wdF9lcnIsIE5VTEwgfQog
fTsKIAotLyogY2FjaGUgZmxhdm9ycyAqLwotZW51bSB7Ci0JT3B0X2NhY2hlX2xvb3NlLAotCU9w
dF9jYWNoZV9zdHJpY3QsCi0JT3B0X2NhY2hlX25vbmUsCi0JT3B0X2NhY2hlX3JvLAotCU9wdF9j
YWNoZV9ydywKLQlPcHRfY2FjaGVfZXJyCi19OwotCi1zdGF0aWMgY29uc3QgbWF0Y2hfdGFibGVf
dCBjaWZzX2NhY2hlZmxhdm9yX3Rva2VucyA9IHsKLQl7IE9wdF9jYWNoZV9sb29zZSwgImxvb3Nl
IiB9LAotCXsgT3B0X2NhY2hlX3N0cmljdCwgInN0cmljdCIgfSwKLQl7IE9wdF9jYWNoZV9ub25l
LCAibm9uZSIgfSwKLQl7IE9wdF9jYWNoZV9ybywgInJvIiB9LAotCXsgT3B0X2NhY2hlX3J3LCAi
c2luZ2xlY2xpZW50IiB9LAotCXsgT3B0X2NhY2hlX2VyciwgTlVMTCB9Ci19OwotCiBzdGF0aWMg
Y29uc3QgbWF0Y2hfdGFibGVfdCBjaWZzX3NtYl92ZXJzaW9uX3Rva2VucyA9IHsKIAl7IFNtYl8x
LCBTTUIxX1ZFUlNJT05fU1RSSU5HIH0sCiAJeyBTbWJfMjAsIFNNQjIwX1ZFUlNJT05fU1RSSU5H
fSwKQEAgLTEzNDYsNDkgKzEzMjcsNiBAQCBzdGF0aWMgaW50IGdldF9vcHRpb25fZ2lkKHN1YnN0
cmluZ190IGFyZ3NbXSwga2dpZF90ICpyZXN1bHQpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBp
bnQKLWNpZnNfcGFyc2VfY2FjaGVfZmxhdm9yKGNoYXIgKnZhbHVlLCBzdHJ1Y3Qgc21iX3ZvbCAq
dm9sKQotewotCXN1YnN0cmluZ190IGFyZ3NbTUFYX09QVF9BUkdTXTsKLQotCXN3aXRjaCAobWF0
Y2hfdG9rZW4odmFsdWUsIGNpZnNfY2FjaGVmbGF2b3JfdG9rZW5zLCBhcmdzKSkgewotCWNhc2Ug
T3B0X2NhY2hlX2xvb3NlOgotCQl2b2wtPmRpcmVjdF9pbyA9IGZhbHNlOwotCQl2b2wtPnN0cmlj
dF9pbyA9IGZhbHNlOwotCQl2b2wtPmNhY2hlX3JvID0gZmFsc2U7Ci0JCXZvbC0+Y2FjaGVfcncg
PSBmYWxzZTsKLQkJYnJlYWs7Ci0JY2FzZSBPcHRfY2FjaGVfc3RyaWN0OgotCQl2b2wtPmRpcmVj
dF9pbyA9IGZhbHNlOwotCQl2b2wtPnN0cmljdF9pbyA9IHRydWU7Ci0JCXZvbC0+Y2FjaGVfcm8g
PSBmYWxzZTsKLQkJdm9sLT5jYWNoZV9ydyA9IGZhbHNlOwotCQlicmVhazsKLQljYXNlIE9wdF9j
YWNoZV9ub25lOgotCQl2b2wtPmRpcmVjdF9pbyA9IHRydWU7Ci0JCXZvbC0+c3RyaWN0X2lvID0g
ZmFsc2U7Ci0JCXZvbC0+Y2FjaGVfcm8gPSBmYWxzZTsKLQkJdm9sLT5jYWNoZV9ydyA9IGZhbHNl
OwotCQlicmVhazsKLQljYXNlIE9wdF9jYWNoZV9ybzoKLQkJdm9sLT5kaXJlY3RfaW8gPSBmYWxz
ZTsKLQkJdm9sLT5zdHJpY3RfaW8gPSBmYWxzZTsKLQkJdm9sLT5jYWNoZV9ybyA9IHRydWU7Ci0J
CXZvbC0+Y2FjaGVfcncgPSBmYWxzZTsKLQkJYnJlYWs7Ci0JY2FzZSBPcHRfY2FjaGVfcnc6Ci0J
CXZvbC0+ZGlyZWN0X2lvID0gZmFsc2U7Ci0JCXZvbC0+c3RyaWN0X2lvID0gZmFsc2U7Ci0JCXZv
bC0+Y2FjaGVfcm8gPSBmYWxzZTsKLQkJdm9sLT5jYWNoZV9ydyA9IHRydWU7Ci0JCWJyZWFrOwot
CWRlZmF1bHQ6Ci0JCWNpZnNfZGJnKFZGUywgImJhZCBjYWNoZT0gb3B0aW9uOiAlc1xuIiwgdmFs
dWUpOwotCQlyZXR1cm4gMTsKLQl9Ci0JcmV0dXJuIDA7Ci19Ci0KIHN0YXRpYyBpbnQKIGNpZnNf
cGFyc2Vfc21iX3ZlcnNpb24oY2hhciAqdmFsdWUsIHN0cnVjdCBzbWJfdm9sICp2b2wsIGJvb2wg
aXNfc21iMykKIHsKZGlmZiAtLWdpdCBhL2ZzL2NpZnMvZnNfY29udGV4dC5jIGIvZnMvY2lmcy9m
c19jb250ZXh0LmMKaW5kZXggZGQ5ZGE3MzRlMzQ2Li5kZWIxMTY4ZWQ4YWYgMTAwNjQ0Ci0tLSBh
L2ZzL2NpZnMvZnNfY29udGV4dC5jCisrKyBiL2ZzL2NpZnMvZnNfY29udGV4dC5jCkBAIC04Miwz
ICs4Miw1NSBAQCBpbnQgY2lmc19wYXJzZV9zZWN1cml0eV9mbGF2b3JzKGNoYXIgKnZhbHVlLCBz
dHJ1Y3Qgc21iX3ZvbCAqdm9sKQogCiAJcmV0dXJuIDA7CiB9CisKK3N0YXRpYyBjb25zdCBtYXRj
aF90YWJsZV90IGNpZnNfY2FjaGVmbGF2b3JfdG9rZW5zID0geworCXsgT3B0X2NhY2hlX2xvb3Nl
LCAibG9vc2UiIH0sCisJeyBPcHRfY2FjaGVfc3RyaWN0LCAic3RyaWN0IiB9LAorCXsgT3B0X2Nh
Y2hlX25vbmUsICJub25lIiB9LAorCXsgT3B0X2NhY2hlX3JvLCAicm8iIH0sCisJeyBPcHRfY2Fj
aGVfcncsICJzaW5nbGVjbGllbnQiIH0sCisJeyBPcHRfY2FjaGVfZXJyLCBOVUxMIH0KK307CisK
K2ludAorY2lmc19wYXJzZV9jYWNoZV9mbGF2b3IoY2hhciAqdmFsdWUsIHN0cnVjdCBzbWJfdm9s
ICp2b2wpCit7CisJc3Vic3RyaW5nX3QgYXJnc1tNQVhfT1BUX0FSR1NdOworCisJc3dpdGNoICht
YXRjaF90b2tlbih2YWx1ZSwgY2lmc19jYWNoZWZsYXZvcl90b2tlbnMsIGFyZ3MpKSB7CisJY2Fz
ZSBPcHRfY2FjaGVfbG9vc2U6CisJCXZvbC0+ZGlyZWN0X2lvID0gZmFsc2U7CisJCXZvbC0+c3Ry
aWN0X2lvID0gZmFsc2U7CisJCXZvbC0+Y2FjaGVfcm8gPSBmYWxzZTsKKwkJdm9sLT5jYWNoZV9y
dyA9IGZhbHNlOworCQlicmVhazsKKwljYXNlIE9wdF9jYWNoZV9zdHJpY3Q6CisJCXZvbC0+ZGly
ZWN0X2lvID0gZmFsc2U7CisJCXZvbC0+c3RyaWN0X2lvID0gdHJ1ZTsKKwkJdm9sLT5jYWNoZV9y
byA9IGZhbHNlOworCQl2b2wtPmNhY2hlX3J3ID0gZmFsc2U7CisJCWJyZWFrOworCWNhc2UgT3B0
X2NhY2hlX25vbmU6CisJCXZvbC0+ZGlyZWN0X2lvID0gdHJ1ZTsKKwkJdm9sLT5zdHJpY3RfaW8g
PSBmYWxzZTsKKwkJdm9sLT5jYWNoZV9ybyA9IGZhbHNlOworCQl2b2wtPmNhY2hlX3J3ID0gZmFs
c2U7CisJCWJyZWFrOworCWNhc2UgT3B0X2NhY2hlX3JvOgorCQl2b2wtPmRpcmVjdF9pbyA9IGZh
bHNlOworCQl2b2wtPnN0cmljdF9pbyA9IGZhbHNlOworCQl2b2wtPmNhY2hlX3JvID0gdHJ1ZTsK
KwkJdm9sLT5jYWNoZV9ydyA9IGZhbHNlOworCQlicmVhazsKKwljYXNlIE9wdF9jYWNoZV9ydzoK
KwkJdm9sLT5kaXJlY3RfaW8gPSBmYWxzZTsKKwkJdm9sLT5zdHJpY3RfaW8gPSBmYWxzZTsKKwkJ
dm9sLT5jYWNoZV9ybyA9IGZhbHNlOworCQl2b2wtPmNhY2hlX3J3ID0gdHJ1ZTsKKwkJYnJlYWs7
CisJZGVmYXVsdDoKKwkJY2lmc19kYmcoVkZTLCAiYmFkIGNhY2hlPSBvcHRpb246ICVzXG4iLCB2
YWx1ZSk7CisJCXJldHVybiAxOworCX0KKwlyZXR1cm4gMDsKK30KZGlmZiAtLWdpdCBhL2ZzL2Np
ZnMvZnNfY29udGV4dC5oIGIvZnMvY2lmcy9mc19jb250ZXh0LmgKaW5kZXggODc3NDdlZjdhMmQz
Li4zZTNmNmUyOWU3ODcgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvZnNfY29udGV4dC5oCisrKyBiL2Zz
L2NpZnMvZnNfY29udGV4dC5oCkBAIC0xMiw2ICsxMiwxNyBAQAogI2luY2x1ZGUgPGxpbnV4L3Bh
cnNlci5oPgogI2luY2x1ZGUgImNpZnNnbG9iLmgiCiAKK2VudW0geworCU9wdF9jYWNoZV9sb29z
ZSwKKwlPcHRfY2FjaGVfc3RyaWN0LAorCU9wdF9jYWNoZV9ub25lLAorCU9wdF9jYWNoZV9ybywK
KwlPcHRfY2FjaGVfcncsCisJT3B0X2NhY2hlX2VycgorfTsKKworaW50IGNpZnNfcGFyc2VfY2Fj
aGVfZmxhdm9yKGNoYXIgKnZhbHVlLCBzdHJ1Y3Qgc21iX3ZvbCAqdm9sKTsKKwogZW51bSBjaWZz
X3NlY19wYXJhbSB7CiAJT3B0X3NlY19rcmI1LAogCU9wdF9zZWNfa3JiNWksCi0tIAoyLjI1LjEK
Cg==
--0000000000006a3fa405b2334e83
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0001-cifs-add-files-to-host-new-mount-api.patch"
Content-Disposition: attachment; 
	filename="0001-cifs-add-files-to-host-new-mount-api.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_kgjsd31j3>
X-Attachment-Id: f_kgjsd31j3

RnJvbSBhMzA2ZDhkNjFhNTQyM2Q4YzM5M2JhZTU0ZGIzMzk1MzU5NDhmY2VkIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBSb25uaWUgU2FobGJlcmcgPGxzYWhsYmVyQHJlZGhhdC5jb20+
CkRhdGU6IFdlZCwgMjEgT2N0IDIwMjAgMTA6MjI6MzMgKzEwMDAKU3ViamVjdDogW1BBVENIIDEv
NF0gY2lmczogYWRkIGZpbGVzIHRvIGhvc3QgbmV3IG1vdW50IGFwaQoKVGhpcyB3aWxsIG1ha2Ug
aXQgZWFzaWVyIGluIHRoZSBmdXR1cmUsIGJ1dCBhbHNvIHdpbGwgYWxsb3cgdXMgdG8Kc2hyaW5r
IGNvbm5lY3QuYyB3aGljaCBpcyBnZXR0aW5nIHRvbyBiaWcsIGFuZCBoYXJkZXIgdG8gcmVhZAoK
U2lnbmVkLW9mZi1ieTogUm9ubmllIFNhaGxiZXJnIDxsc2FobGJlckByZWRoYXQuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBTdGV2ZSBGcmVuY2ggPHN0ZnJlbmNoQG1pY3Jvc29mdC5jb20+Ci0tLQogZnMv
Y2lmcy9NYWtlZmlsZSAgICAgfCAgMiArLQogZnMvY2lmcy9mc19jb250ZXh0LmMgfCAgOCArKysr
KysrKwogZnMvY2lmcy9mc19jb250ZXh0LmggfCAxNSArKysrKysrKysrKysrKysKIDMgZmlsZXMg
Y2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAw
NjQ0IGZzL2NpZnMvZnNfY29udGV4dC5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZnMvY2lmcy9mc19j
b250ZXh0LmgKCmRpZmYgLS1naXQgYS9mcy9jaWZzL01ha2VmaWxlIGIvZnMvY2lmcy9NYWtlZmls
ZQppbmRleCA1MWJhZTkzNDA4NDIuLmNkMTdkMGU1MGYyYSAxMDA2NDQKLS0tIGEvZnMvY2lmcy9N
YWtlZmlsZQorKysgYi9mcy9jaWZzL01ha2VmaWxlCkBAIC0xMCw3ICsxMCw3IEBAIGNpZnMteSA6
PSB0cmFjZS5vIGNpZnNmcy5vIGNpZnNzbWIubyBjaWZzX2RlYnVnLm8gY29ubmVjdC5vIGRpci5v
IGZpbGUubyBcCiAJICBjaWZzX3VuaWNvZGUubyBudGVyci5vIGNpZnNlbmNyeXB0Lm8gXAogCSAg
cmVhZGRpci5vIGlvY3RsLm8gc2Vzcy5vIGV4cG9ydC5vIHNtYjFvcHMubyB3aW51Y2FzZS5vIFwK
IAkgIHNtYjJvcHMubyBzbWIybWFwZXJyb3IubyBzbWIydHJhbnNwb3J0Lm8gXAotCSAgc21iMm1p
c2MubyBzbWIycGR1Lm8gc21iMmlub2RlLm8gc21iMmZpbGUubyBjaWZzYWNsLm8KKwkgIHNtYjJt
aXNjLm8gc21iMnBkdS5vIHNtYjJpbm9kZS5vIHNtYjJmaWxlLm8gY2lmc2FjbC5vIGZzX2NvbnRl
eHQubwogCiBjaWZzLSQoQ09ORklHX0NJRlNfWEFUVFIpICs9IHhhdHRyLm8KIApkaWZmIC0tZ2l0
IGEvZnMvY2lmcy9mc19jb250ZXh0LmMgYi9mcy9jaWZzL2ZzX2NvbnRleHQuYwpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmY1MGRmYzJkMmU0NAotLS0gL2Rldi9udWxs
CisrKyBiL2ZzL2NpZnMvZnNfY29udGV4dC5jCkBAIC0wLDAgKzEsOCBAQAorLy8gU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKy8qCisgKiAgIENvcHlyaWdodCAoQykg
MjAyMCwgTWljcm9zb2Z0IENvcnBvcmF0aW9uLgorICoKKyAqICAgQXV0aG9yKHMpOiBTdGV2ZSBG
cmVuY2ggPHN0ZnJlbmNoQG1pY3Jvc29mdC5jb20+CisgKiAgICAgICAgICAgICAgRGF2aWQgSG93
ZWxscyA8ZGhvd2VsbHNAcmVkaGF0LmNvbT4KKyAqLworCmRpZmYgLS1naXQgYS9mcy9jaWZzL2Zz
X2NvbnRleHQuaCBiL2ZzL2NpZnMvZnNfY29udGV4dC5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMC4uMDgyZjI4NmY5MjNlCi0tLSAvZGV2L251bGwKKysrIGIvZnMvY2lm
cy9mc19jb250ZXh0LmgKQEAgLTAsMCArMSwxNSBAQAorLyogU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAtb3ItbGF0ZXIgKi8KKy8qCisgKiAgIENvcHlyaWdodCAoQykgMjAyMCwgTWlj
cm9zb2Z0IENvcnBvcmF0aW9uLgorICoKKyAqICAgQXV0aG9yKHMpOiBTdGV2ZSBGcmVuY2ggPHN0
ZnJlbmNoQG1pY3Jvc29mdC5jb20+CisgKiAgICAgICAgICAgICAgRGF2aWQgSG93ZWxscyA8ZGhv
d2VsbHNAcmVkaGF0LmNvbT4KKyAqLworCisjaWZuZGVmIF9GU19DT05URVhUX0gKKyNkZWZpbmUg
X0ZTX0NPTlRFWFRfSAorCisKKworI2VuZGlmCisKLS0gCjIuMjUuMQoK
--0000000000006a3fa405b2334e83
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0004-cifs-move-smb-version-mount-options-into-fs_context..patch"
Content-Disposition: attachment; 
	filename="0004-cifs-move-smb-version-mount-options-into-fs_context..patch"
Content-Transfer-Encoding: base64
Content-ID: <f_kgjsd30o0>
X-Attachment-Id: f_kgjsd30o0

RnJvbSBjMDIwODY0MmJjMTgyNTg4ZGQyNTc2NWY0ZTlkMTlhMDY4NTI1NzY3IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBSb25uaWUgU2FobGJlcmcgPGxzYWhsYmVyQHJlZGhhdC5jb20+
CkRhdGU6IFdlZCwgMjEgT2N0IDIwMjAgMTI6MTA6NDQgKzEwMDAKU3ViamVjdDogW1BBVENIIDQv
NF0gY2lmczogbW92ZSBzbWIgdmVyc2lvbiBtb3VudCBvcHRpb25zIGludG8gZnNfY29udGV4dC5j
CgpUaGlzIGFuZCByZWxhdGVkIHBhdGNoZXMgd2hpY2ggbW92ZSBtb3VudCByZWxhdGVkCmNvZGUg
dG8gZnNfY29udGV4dC5jIGhhcyB0aGUgYWR2YW50YWdlIG9mCnNocmlraW5nIHRoZSBjb2RlIGlu
IGZzL2NpZnMvY29ubmVjdC5jICh3aGljaCBoYWQKdGhlIHNlY29uZCBtb3N0IGxpbmVzIG9mIGNv
ZGUgb2YgYW55IG9mIHRoZSBmaWxlcwppbiBjaWZzLmtvIGFuZCB3YXMgZ2V0dGluZyBoYXJkZXIg
dG8gcmVhZCBkdWUKdG8gaXRzIHNpemUpIGFuZCB3aWxsIGFsc28gbWFrZSBpdCBlYXNpZXIgdG8K
c3dpdGNoIG92ZXIgdG8gdGhlIG5ldyBtb3VudCBBUEkgaW4gdGhlIGZ1dHVyZS4KClNpZ25lZC1v
ZmYtYnk6IFJvbm5pZSBTYWhsYmVyZyA8bHNhaGxiZXJAcmVkaGF0LmNvbT4KU2lnbmVkLW9mZi1i
eTogU3RldmUgRnJlbmNoIDxzdGZyZW5jaEBtaWNyb3NvZnQuY29tPgotLS0KIGZzL2NpZnMvY2lm
c2dsb2IuaCAgIHwgMTIgLS0tLS0tLQogZnMvY2lmcy9jb25uZWN0LmMgICAgfCA4NSAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogZnMvY2lmcy9mc19jb250ZXh0
LmMgfCA4NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogZnMv
Y2lmcy9mc19jb250ZXh0LmggfCAxNCArKysrKysrKwogNCBmaWxlcyBjaGFuZ2VkLCA5OSBpbnNl
cnRpb25zKCspLCA5NyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9mcy9jaWZzL2NpZnNnbG9i
LmggYi9mcy9jaWZzL2NpZnNnbG9iLmgKaW5kZXggYTFhMWExNmFjYjM4Li5iNjkyNWFlZWI2MjEg
MTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvY2lmc2dsb2IuaAorKysgYi9mcy9jaWZzL2NpZnNnbG9iLmgK
QEAgLTE5NSwxOCArMTk1LDYgQEAgc3RydWN0IHNtYl9ycXN0IHsKIAl1bnNpZ25lZCBpbnQJcnFf
dGFpbHN6OwkvKiBsZW5ndGggb2YgbGFzdCBwYWdlICovCiB9OwogCi1lbnVtIHNtYl92ZXJzaW9u
IHsKLQlTbWJfMSA9IDEsCi0JU21iXzIwLAotCVNtYl8yMSwKLQlTbWJfMzAsCi0JU21iXzMwMiwK
LQlTbWJfMzExLAotCVNtYl8zYW55LAotCVNtYl9kZWZhdWx0LAotCVNtYl92ZXJzaW9uX2Vycgot
fTsKLQogc3RydWN0IG1pZF9xX2VudHJ5Owogc3RydWN0IFRDUF9TZXJ2ZXJfSW5mbzsKIHN0cnVj
dCBjaWZzRmlsZUluZm87CmRpZmYgLS1naXQgYS9mcy9jaWZzL2Nvbm5lY3QuYyBiL2ZzL2NpZnMv
Y29ubmVjdC5jCmluZGV4IGY3ZWYzOGE5ZGFmYS4uYzM4MTU2ZjMyNGRkIDEwMDY0NAotLS0gYS9m
cy9jaWZzL2Nvbm5lY3QuYworKysgYi9mcy9jaWZzL2Nvbm5lY3QuYwpAQCAtMjgwLDIwICsyODAs
NiBAQCBzdGF0aWMgY29uc3QgbWF0Y2hfdGFibGVfdCBjaWZzX21vdW50X29wdGlvbl90b2tlbnMg
PSB7CiAJeyBPcHRfZXJyLCBOVUxMIH0KIH07CiAKLXN0YXRpYyBjb25zdCBtYXRjaF90YWJsZV90
IGNpZnNfc21iX3ZlcnNpb25fdG9rZW5zID0gewotCXsgU21iXzEsIFNNQjFfVkVSU0lPTl9TVFJJ
TkcgfSwKLQl7IFNtYl8yMCwgU01CMjBfVkVSU0lPTl9TVFJJTkd9LAotCXsgU21iXzIxLCBTTUIy
MV9WRVJTSU9OX1NUUklORyB9LAotCXsgU21iXzMwLCBTTUIzMF9WRVJTSU9OX1NUUklORyB9LAot
CXsgU21iXzMwMiwgU01CMzAyX1ZFUlNJT05fU1RSSU5HIH0sCi0JeyBTbWJfMzAyLCBBTFRfU01C
MzAyX1ZFUlNJT05fU1RSSU5HIH0sCi0JeyBTbWJfMzExLCBTTUIzMTFfVkVSU0lPTl9TVFJJTkcg
fSwKLQl7IFNtYl8zMTEsIEFMVF9TTUIzMTFfVkVSU0lPTl9TVFJJTkcgfSwKLQl7IFNtYl8zYW55
LCBTTUIzQU5ZX1ZFUlNJT05fU1RSSU5HIH0sCi0JeyBTbWJfZGVmYXVsdCwgU01CREVGQVVMVF9W
RVJTSU9OX1NUUklORyB9LAotCXsgU21iX3ZlcnNpb25fZXJyLCBOVUxMIH0KLX07Ci0KIHN0YXRp
YyBpbnQgaXBfY29ubmVjdChzdHJ1Y3QgVENQX1NlcnZlcl9JbmZvICpzZXJ2ZXIpOwogc3RhdGlj
IGludCBnZW5lcmljX2lwX2Nvbm5lY3Qoc3RydWN0IFRDUF9TZXJ2ZXJfSW5mbyAqc2VydmVyKTsK
IHN0YXRpYyB2b2lkIHRsaW5rX3JiX2luc2VydChzdHJ1Y3QgcmJfcm9vdCAqcm9vdCwgc3RydWN0
IHRjb25fbGluayAqbmV3X3RsaW5rKTsKQEAgLTEzMjcsNzcgKzEzMTMsNiBAQCBzdGF0aWMgaW50
IGdldF9vcHRpb25fZ2lkKHN1YnN0cmluZ190IGFyZ3NbXSwga2dpZF90ICpyZXN1bHQpCiAJcmV0
dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQKLWNpZnNfcGFyc2Vfc21iX3ZlcnNpb24oY2hhciAqdmFs
dWUsIHN0cnVjdCBzbWJfdm9sICp2b2wsIGJvb2wgaXNfc21iMykKLXsKLQlzdWJzdHJpbmdfdCBh
cmdzW01BWF9PUFRfQVJHU107Ci0KLQlzd2l0Y2ggKG1hdGNoX3Rva2VuKHZhbHVlLCBjaWZzX3Nt
Yl92ZXJzaW9uX3Rva2VucywgYXJncykpIHsKLSNpZmRlZiBDT05GSUdfQ0lGU19BTExPV19JTlNF
Q1VSRV9MRUdBQ1kKLQljYXNlIFNtYl8xOgotCQlpZiAoZGlzYWJsZV9sZWdhY3lfZGlhbGVjdHMp
IHsKLQkJCWNpZnNfZGJnKFZGUywgIm1vdW50IHdpdGggbGVnYWN5IGRpYWxlY3QgZGlzYWJsZWRc
biIpOwotCQkJcmV0dXJuIDE7Ci0JCX0KLQkJaWYgKGlzX3NtYjMpIHsKLQkJCWNpZnNfZGJnKFZG
UywgInZlcnM9MS4wIChjaWZzKSBub3QgcGVybWl0dGVkIHdoZW4gbW91bnRpbmcgd2l0aCBzbWIz
XG4iKTsKLQkJCXJldHVybiAxOwotCQl9Ci0JCWNpZnNfZGJnKFZGUywgIlVzZSBvZiB0aGUgbGVz
cyBzZWN1cmUgZGlhbGVjdCB2ZXJzPTEuMCBpcyBub3QgcmVjb21tZW5kZWQgdW5sZXNzIHJlcXVp
cmVkIGZvciBhY2Nlc3MgdG8gdmVyeSBvbGQgc2VydmVyc1xuIik7Ci0JCXZvbC0+b3BzID0gJnNt
YjFfb3BlcmF0aW9uczsKLQkJdm9sLT52YWxzID0gJnNtYjFfdmFsdWVzOwotCQlicmVhazsKLQlj
YXNlIFNtYl8yMDoKLQkJaWYgKGRpc2FibGVfbGVnYWN5X2RpYWxlY3RzKSB7Ci0JCQljaWZzX2Ri
ZyhWRlMsICJtb3VudCB3aXRoIGxlZ2FjeSBkaWFsZWN0IGRpc2FibGVkXG4iKTsKLQkJCXJldHVy
biAxOwotCQl9Ci0JCWlmIChpc19zbWIzKSB7Ci0JCQljaWZzX2RiZyhWRlMsICJ2ZXJzPTIuMCBu
b3QgcGVybWl0dGVkIHdoZW4gbW91bnRpbmcgd2l0aCBzbWIzXG4iKTsKLQkJCXJldHVybiAxOwot
CQl9Ci0JCXZvbC0+b3BzID0gJnNtYjIwX29wZXJhdGlvbnM7Ci0JCXZvbC0+dmFscyA9ICZzbWIy
MF92YWx1ZXM7Ci0JCWJyZWFrOwotI2Vsc2UKLQljYXNlIFNtYl8xOgotCQljaWZzX2RiZyhWRlMs
ICJ2ZXJzPTEuMCAoY2lmcykgbW91bnQgbm90IHBlcm1pdHRlZCB3aGVuIGxlZ2FjeSBkaWFsZWN0
cyBkaXNhYmxlZFxuIik7Ci0JCXJldHVybiAxOwotCWNhc2UgU21iXzIwOgotCQljaWZzX2RiZyhW
RlMsICJ2ZXJzPTIuMCBtb3VudCBub3QgcGVybWl0dGVkIHdoZW4gbGVnYWN5IGRpYWxlY3RzIGRp
c2FibGVkXG4iKTsKLQkJcmV0dXJuIDE7Ci0jZW5kaWYgLyogQ0lGU19BTExPV19JTlNFQ1VSRV9M
RUdBQ1kgKi8KLQljYXNlIFNtYl8yMToKLQkJdm9sLT5vcHMgPSAmc21iMjFfb3BlcmF0aW9uczsK
LQkJdm9sLT52YWxzID0gJnNtYjIxX3ZhbHVlczsKLQkJYnJlYWs7Ci0JY2FzZSBTbWJfMzA6Ci0J
CXZvbC0+b3BzID0gJnNtYjMwX29wZXJhdGlvbnM7Ci0JCXZvbC0+dmFscyA9ICZzbWIzMF92YWx1
ZXM7Ci0JCWJyZWFrOwotCWNhc2UgU21iXzMwMjoKLQkJdm9sLT5vcHMgPSAmc21iMzBfb3BlcmF0
aW9uczsgLyogY3VycmVudGx5IGlkZW50aWNhbCB3aXRoIDMuMCAqLwotCQl2b2wtPnZhbHMgPSAm
c21iMzAyX3ZhbHVlczsKLQkJYnJlYWs7Ci0JY2FzZSBTbWJfMzExOgotCQl2b2wtPm9wcyA9ICZz
bWIzMTFfb3BlcmF0aW9uczsKLQkJdm9sLT52YWxzID0gJnNtYjMxMV92YWx1ZXM7Ci0JCWJyZWFr
OwotCWNhc2UgU21iXzNhbnk6Ci0JCXZvbC0+b3BzID0gJnNtYjMwX29wZXJhdGlvbnM7IC8qIGN1
cnJlbnRseSBpZGVudGljYWwgd2l0aCAzLjAgKi8KLQkJdm9sLT52YWxzID0gJnNtYjNhbnlfdmFs
dWVzOwotCQlicmVhazsKLQljYXNlIFNtYl9kZWZhdWx0OgotCQl2b2wtPm9wcyA9ICZzbWIzMF9v
cGVyYXRpb25zOyAvKiBjdXJyZW50bHkgaWRlbnRpY2FsIHdpdGggMy4wICovCi0JCXZvbC0+dmFs
cyA9ICZzbWJkZWZhdWx0X3ZhbHVlczsKLQkJYnJlYWs7Ci0JZGVmYXVsdDoKLQkJY2lmc19kYmco
VkZTLCAiVW5rbm93biB2ZXJzPSBvcHRpb24gc3BlY2lmaWVkOiAlc1xuIiwgdmFsdWUpOwotCQly
ZXR1cm4gMTsKLQl9Ci0JcmV0dXJuIDA7Ci19Ci0KIC8qCiAgKiBQYXJzZSBhIGRldm5hbWUgaW50
byBzdWJzdHJpbmdzIGFuZCBwb3B1bGF0ZSB0aGUgdm9sLT5VTkMgYW5kIHZvbC0+cHJlcGF0aAog
ICogZmllbGRzIHdpdGggdGhlIHJlc3VsdC4gUmV0dXJucyAwIG9uIHN1Y2Nlc3MgYW5kIGFuIGVy
cm9yIG90aGVyd2lzZS4KZGlmZiAtLWdpdCBhL2ZzL2NpZnMvZnNfY29udGV4dC5jIGIvZnMvY2lm
cy9mc19jb250ZXh0LmMKaW5kZXggZGViMTE2OGVkOGFmLi5hZDZjMmZlZDQwNTUgMTAwNjQ0Ci0t
LSBhL2ZzL2NpZnMvZnNfY29udGV4dC5jCisrKyBiL2ZzL2NpZnMvZnNfY29udGV4dC5jCkBAIC0x
MCw2ICsxMCw5MSBAQAogI2luY2x1ZGUgImNpZnNfZGVidWcuaCIKICNpbmNsdWRlICJmc19jb250
ZXh0LmgiCiAKK3N0YXRpYyBjb25zdCBtYXRjaF90YWJsZV90IGNpZnNfc21iX3ZlcnNpb25fdG9r
ZW5zID0geworCXsgU21iXzEsIFNNQjFfVkVSU0lPTl9TVFJJTkcgfSwKKwl7IFNtYl8yMCwgU01C
MjBfVkVSU0lPTl9TVFJJTkd9LAorCXsgU21iXzIxLCBTTUIyMV9WRVJTSU9OX1NUUklORyB9LAor
CXsgU21iXzMwLCBTTUIzMF9WRVJTSU9OX1NUUklORyB9LAorCXsgU21iXzMwMiwgU01CMzAyX1ZF
UlNJT05fU1RSSU5HIH0sCisJeyBTbWJfMzAyLCBBTFRfU01CMzAyX1ZFUlNJT05fU1RSSU5HIH0s
CisJeyBTbWJfMzExLCBTTUIzMTFfVkVSU0lPTl9TVFJJTkcgfSwKKwl7IFNtYl8zMTEsIEFMVF9T
TUIzMTFfVkVSU0lPTl9TVFJJTkcgfSwKKwl7IFNtYl8zYW55LCBTTUIzQU5ZX1ZFUlNJT05fU1RS
SU5HIH0sCisJeyBTbWJfZGVmYXVsdCwgU01CREVGQVVMVF9WRVJTSU9OX1NUUklORyB9LAorCXsg
U21iX3ZlcnNpb25fZXJyLCBOVUxMIH0KK307CisKK2ludAorY2lmc19wYXJzZV9zbWJfdmVyc2lv
bihjaGFyICp2YWx1ZSwgc3RydWN0IHNtYl92b2wgKnZvbCwgYm9vbCBpc19zbWIzKQoreworCXN1
YnN0cmluZ190IGFyZ3NbTUFYX09QVF9BUkdTXTsKKworCXN3aXRjaCAobWF0Y2hfdG9rZW4odmFs
dWUsIGNpZnNfc21iX3ZlcnNpb25fdG9rZW5zLCBhcmdzKSkgeworI2lmZGVmIENPTkZJR19DSUZT
X0FMTE9XX0lOU0VDVVJFX0xFR0FDWQorCWNhc2UgU21iXzE6CisJCWlmIChkaXNhYmxlX2xlZ2Fj
eV9kaWFsZWN0cykgeworCQkJY2lmc19kYmcoVkZTLCAibW91bnQgd2l0aCBsZWdhY3kgZGlhbGVj
dCBkaXNhYmxlZFxuIik7CisJCQlyZXR1cm4gMTsKKwkJfQorCQlpZiAoaXNfc21iMykgeworCQkJ
Y2lmc19kYmcoVkZTLCAidmVycz0xLjAgKGNpZnMpIG5vdCBwZXJtaXR0ZWQgd2hlbiBtb3VudGlu
ZyB3aXRoIHNtYjNcbiIpOworCQkJcmV0dXJuIDE7CisJCX0KKwkJY2lmc19kYmcoVkZTLCAiVXNl
IG9mIHRoZSBsZXNzIHNlY3VyZSBkaWFsZWN0IHZlcnM9MS4wIGlzIG5vdCByZWNvbW1lbmRlZCB1
bmxlc3MgcmVxdWlyZWQgZm9yIGFjY2VzcyB0byB2ZXJ5IG9sZCBzZXJ2ZXJzXG4iKTsKKwkJdm9s
LT5vcHMgPSAmc21iMV9vcGVyYXRpb25zOworCQl2b2wtPnZhbHMgPSAmc21iMV92YWx1ZXM7CisJ
CWJyZWFrOworCWNhc2UgU21iXzIwOgorCQlpZiAoZGlzYWJsZV9sZWdhY3lfZGlhbGVjdHMpIHsK
KwkJCWNpZnNfZGJnKFZGUywgIm1vdW50IHdpdGggbGVnYWN5IGRpYWxlY3QgZGlzYWJsZWRcbiIp
OworCQkJcmV0dXJuIDE7CisJCX0KKwkJaWYgKGlzX3NtYjMpIHsKKwkJCWNpZnNfZGJnKFZGUywg
InZlcnM9Mi4wIG5vdCBwZXJtaXR0ZWQgd2hlbiBtb3VudGluZyB3aXRoIHNtYjNcbiIpOworCQkJ
cmV0dXJuIDE7CisJCX0KKwkJdm9sLT5vcHMgPSAmc21iMjBfb3BlcmF0aW9uczsKKwkJdm9sLT52
YWxzID0gJnNtYjIwX3ZhbHVlczsKKwkJYnJlYWs7CisjZWxzZQorCWNhc2UgU21iXzE6CisJCWNp
ZnNfZGJnKFZGUywgInZlcnM9MS4wIChjaWZzKSBtb3VudCBub3QgcGVybWl0dGVkIHdoZW4gbGVn
YWN5IGRpYWxlY3RzIGRpc2FibGVkXG4iKTsKKwkJcmV0dXJuIDE7CisJY2FzZSBTbWJfMjA6CisJ
CWNpZnNfZGJnKFZGUywgInZlcnM9Mi4wIG1vdW50IG5vdCBwZXJtaXR0ZWQgd2hlbiBsZWdhY3kg
ZGlhbGVjdHMgZGlzYWJsZWRcbiIpOworCQlyZXR1cm4gMTsKKyNlbmRpZiAvKiBDSUZTX0FMTE9X
X0lOU0VDVVJFX0xFR0FDWSAqLworCWNhc2UgU21iXzIxOgorCQl2b2wtPm9wcyA9ICZzbWIyMV9v
cGVyYXRpb25zOworCQl2b2wtPnZhbHMgPSAmc21iMjFfdmFsdWVzOworCQlicmVhazsKKwljYXNl
IFNtYl8zMDoKKwkJdm9sLT5vcHMgPSAmc21iMzBfb3BlcmF0aW9uczsKKwkJdm9sLT52YWxzID0g
JnNtYjMwX3ZhbHVlczsKKwkJYnJlYWs7CisJY2FzZSBTbWJfMzAyOgorCQl2b2wtPm9wcyA9ICZz
bWIzMF9vcGVyYXRpb25zOyAvKiBjdXJyZW50bHkgaWRlbnRpY2FsIHdpdGggMy4wICovCisJCXZv
bC0+dmFscyA9ICZzbWIzMDJfdmFsdWVzOworCQlicmVhazsKKwljYXNlIFNtYl8zMTE6CisJCXZv
bC0+b3BzID0gJnNtYjMxMV9vcGVyYXRpb25zOworCQl2b2wtPnZhbHMgPSAmc21iMzExX3ZhbHVl
czsKKwkJYnJlYWs7CisJY2FzZSBTbWJfM2FueToKKwkJdm9sLT5vcHMgPSAmc21iMzBfb3BlcmF0
aW9uczsgLyogY3VycmVudGx5IGlkZW50aWNhbCB3aXRoIDMuMCAqLworCQl2b2wtPnZhbHMgPSAm
c21iM2FueV92YWx1ZXM7CisJCWJyZWFrOworCWNhc2UgU21iX2RlZmF1bHQ6CisJCXZvbC0+b3Bz
ID0gJnNtYjMwX29wZXJhdGlvbnM7IC8qIGN1cnJlbnRseSBpZGVudGljYWwgd2l0aCAzLjAgKi8K
KwkJdm9sLT52YWxzID0gJnNtYmRlZmF1bHRfdmFsdWVzOworCQlicmVhazsKKwlkZWZhdWx0Ogor
CQljaWZzX2RiZyhWRlMsICJVbmtub3duIHZlcnM9IG9wdGlvbiBzcGVjaWZpZWQ6ICVzXG4iLCB2
YWx1ZSk7CisJCXJldHVybiAxOworCX0KKwlyZXR1cm4gMDsKK30KKwogc3RhdGljIGNvbnN0IG1h
dGNoX3RhYmxlX3QgY2lmc19zZWNmbGF2b3JfdG9rZW5zID0gewogCXsgT3B0X3NlY19rcmI1LCAi
a3JiNSIgfSwKIAl7IE9wdF9zZWNfa3JiNWksICJrcmI1aSIgfSwKZGlmZiAtLWdpdCBhL2ZzL2Np
ZnMvZnNfY29udGV4dC5oIGIvZnMvY2lmcy9mc19jb250ZXh0LmgKaW5kZXggM2UzZjZlMjllNzg3
Li44ODYyMDhhMWIwZWYgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvZnNfY29udGV4dC5oCisrKyBiL2Zz
L2NpZnMvZnNfY29udGV4dC5oCkBAIC0xMiw2ICsxMiwyMCBAQAogI2luY2x1ZGUgPGxpbnV4L3Bh
cnNlci5oPgogI2luY2x1ZGUgImNpZnNnbG9iLmgiCiAKK2VudW0gc21iX3ZlcnNpb24geworCVNt
Yl8xID0gMSwKKwlTbWJfMjAsCisJU21iXzIxLAorCVNtYl8zMCwKKwlTbWJfMzAyLAorCVNtYl8z
MTEsCisJU21iXzNhbnksCisJU21iX2RlZmF1bHQsCisJU21iX3ZlcnNpb25fZXJyCit9OworCitp
bnQgY2lmc19wYXJzZV9zbWJfdmVyc2lvbihjaGFyICp2YWx1ZSwgc3RydWN0IHNtYl92b2wgKnZv
bCwgYm9vbCBpc19zbWIzKTsKKwogZW51bSB7CiAJT3B0X2NhY2hlX2xvb3NlLAogCU9wdF9jYWNo
ZV9zdHJpY3QsCi0tIAoyLjI1LjEKCg==
--0000000000006a3fa405b2334e83
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0002-cifs-move-security-mount-options-into-fs_context.ch.patch"
Content-Disposition: attachment; 
	filename="0002-cifs-move-security-mount-options-into-fs_context.ch.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_kgjsd31e2>
X-Attachment-Id: f_kgjsd31e2

RnJvbSBlYTk2M2FiNzhhZTRlNmJlZDgxMDAwMzIyMjBhMjc1YjhmMDllMjJkIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBSb25uaWUgU2FobGJlcmcgPGxzYWhsYmVyQHJlZGhhdC5jb20+
CkRhdGU6IFdlZCwgMjEgT2N0IDIwMjAgMTA6Mzc6MTEgKzEwMDAKU3ViamVjdDogW1BBVENIIDIv
NF0gY2lmczogbW92ZSBzZWN1cml0eSBtb3VudCBvcHRpb25zIGludG8gZnNfY29udGV4dC5jaAoK
VGhpcyBwYXRjaCBtb3ZlcyB0aGUgcGFyc2luZyBvZiBzZWN1cml0eSBtb3VudCBvcHRpb25zIGlu
dG8KZnNfY29udGV4dC5jaC4KVGhlcmUgYXJlIG5vIGNoYW5nZXMgdG8gYW55IGxvZ2ljLgoKU2ln
bmVkLW9mZi1ieTogUm9ubmllIFNhaGxiZXJnIDxsc2FobGJlckByZWRoYXQuY29tPgpTaWduZWQt
b2ZmLWJ5OiBTdGV2ZSBGcmVuY2ggPHN0ZnJlbmNoQG1pY3Jvc29mdC5jb20+Ci0tLQogZnMvY2lm
cy9jb25uZWN0LmMgICAgfCA4NSArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQogZnMvY2lmcy9mc19jb250ZXh0LmMgfCA3NiArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysKIGZzL2NpZnMvZnNfY29udGV4dC5oIHwgMjAgKysrKysrKysrKy0K
IDMgZmlsZXMgY2hhbmdlZCwgOTYgaW5zZXJ0aW9ucygrKSwgODUgZGVsZXRpb25zKC0pCgpkaWZm
IC0tZ2l0IGEvZnMvY2lmcy9jb25uZWN0LmMgYi9mcy9jaWZzL2Nvbm5lY3QuYwppbmRleCAzYTk5
ODBiZjBkNmUuLmMyYTkyZTI2ZmVmNCAxMDA2NDQKLS0tIGEvZnMvY2lmcy9jb25uZWN0LmMKKysr
IGIvZnMvY2lmcy9jb25uZWN0LmMKQEAgLTYxLDYgKzYxLDcgQEAKICNpZmRlZiBDT05GSUdfQ0lG
U19ERlNfVVBDQUxMCiAjaW5jbHVkZSAiZGZzX2NhY2hlLmgiCiAjZW5kaWYKKyNpbmNsdWRlICJm
c19jb250ZXh0LmgiCiAKIGV4dGVybiBtZW1wb29sX3QgKmNpZnNfcmVxX3Bvb2xwOwogZXh0ZXJu
IGJvb2wgZGlzYWJsZV9sZWdhY3lfZGlhbGVjdHM7CkBAIC0yNzksMzMgKzI4MCw2IEBAIHN0YXRp
YyBjb25zdCBtYXRjaF90YWJsZV90IGNpZnNfbW91bnRfb3B0aW9uX3Rva2VucyA9IHsKIAl7IE9w
dF9lcnIsIE5VTEwgfQogfTsKIAotZW51bSB7Ci0JT3B0X3NlY19rcmI1LCBPcHRfc2VjX2tyYjVp
LCBPcHRfc2VjX2tyYjVwLAotCU9wdF9zZWNfbnRsbXNzcGksIE9wdF9zZWNfbnRsbXNzcCwKLQlP
cHRfbnRsbSwgT3B0X3NlY19udGxtaSwgT3B0X3NlY19udGxtdjIsCi0JT3B0X3NlY19udGxtdjJp
LCBPcHRfc2VjX2xhbm1hbiwKLQlPcHRfc2VjX25vbmUsCi0KLQlPcHRfc2VjX2VycgotfTsKLQot
c3RhdGljIGNvbnN0IG1hdGNoX3RhYmxlX3QgY2lmc19zZWNmbGF2b3JfdG9rZW5zID0gewotCXsg
T3B0X3NlY19rcmI1LCAia3JiNSIgfSwKLQl7IE9wdF9zZWNfa3JiNWksICJrcmI1aSIgfSwKLQl7
IE9wdF9zZWNfa3JiNXAsICJrcmI1cCIgfSwKLQl7IE9wdF9zZWNfbnRsbXNzcGksICJudGxtc3Nw
aSIgfSwKLQl7IE9wdF9zZWNfbnRsbXNzcCwgIm50bG1zc3AiIH0sCi0JeyBPcHRfbnRsbSwgIm50
bG0iIH0sCi0JeyBPcHRfc2VjX250bG1pLCAibnRsbWkiIH0sCi0JeyBPcHRfc2VjX250bG12Miwg
Im5vbnRsbSIgfSwKLQl7IE9wdF9zZWNfbnRsbXYyLCAibnRsbXYyIiB9LAotCXsgT3B0X3NlY19u
dGxtdjJpLCAibnRsbXYyaSIgfSwKLQl7IE9wdF9zZWNfbGFubWFuLCAibGFubWFuIiB9LAotCXsg
T3B0X3NlY19ub25lLCAibm9uZSIgfSwKLQotCXsgT3B0X3NlY19lcnIsIE5VTEwgfQotfTsKLQog
LyogY2FjaGUgZmxhdm9ycyAqLwogZW51bSB7CiAJT3B0X2NhY2hlX2xvb3NlLApAQCAtMTM3Miw2
MyArMTM0Niw2IEBAIHN0YXRpYyBpbnQgZ2V0X29wdGlvbl9naWQoc3Vic3RyaW5nX3QgYXJnc1td
LCBrZ2lkX3QgKnJlc3VsdCkKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIGludCBjaWZzX3BhcnNl
X3NlY3VyaXR5X2ZsYXZvcnMoY2hhciAqdmFsdWUsCi0JCQkJICAgICAgIHN0cnVjdCBzbWJfdm9s
ICp2b2wpCi17Ci0KLQlzdWJzdHJpbmdfdCBhcmdzW01BWF9PUFRfQVJHU107Ci0KLQkvKgotCSAq
IFdpdGggbW91bnQgb3B0aW9ucywgdGhlIGxhc3Qgb25lIHNob3VsZCB3aW4uIFJlc2V0IGFueSBl
eGlzdGluZwotCSAqIHNldHRpbmdzIGJhY2sgdG8gZGVmYXVsdC4KLQkgKi8KLQl2b2wtPnNlY3R5
cGUgPSBVbnNwZWNpZmllZDsKLQl2b2wtPnNpZ24gPSBmYWxzZTsKLQotCXN3aXRjaCAobWF0Y2hf
dG9rZW4odmFsdWUsIGNpZnNfc2VjZmxhdm9yX3Rva2VucywgYXJncykpIHsKLQljYXNlIE9wdF9z
ZWNfa3JiNXA6Ci0JCWNpZnNfZGJnKFZGUywgInNlYz1rcmI1cCBpcyBub3Qgc3VwcG9ydGVkIVxu
Iik7Ci0JCXJldHVybiAxOwotCWNhc2UgT3B0X3NlY19rcmI1aToKLQkJdm9sLT5zaWduID0gdHJ1
ZTsKLQkJZmFsbHRocm91Z2g7Ci0JY2FzZSBPcHRfc2VjX2tyYjU6Ci0JCXZvbC0+c2VjdHlwZSA9
IEtlcmJlcm9zOwotCQlicmVhazsKLQljYXNlIE9wdF9zZWNfbnRsbXNzcGk6Ci0JCXZvbC0+c2ln
biA9IHRydWU7Ci0JCWZhbGx0aHJvdWdoOwotCWNhc2UgT3B0X3NlY19udGxtc3NwOgotCQl2b2wt
PnNlY3R5cGUgPSBSYXdOVExNU1NQOwotCQlicmVhazsKLQljYXNlIE9wdF9zZWNfbnRsbWk6Ci0J
CXZvbC0+c2lnbiA9IHRydWU7Ci0JCWZhbGx0aHJvdWdoOwotCWNhc2UgT3B0X250bG06Ci0JCXZv
bC0+c2VjdHlwZSA9IE5UTE07Ci0JCWJyZWFrOwotCWNhc2UgT3B0X3NlY19udGxtdjJpOgotCQl2
b2wtPnNpZ24gPSB0cnVlOwotCQlmYWxsdGhyb3VnaDsKLQljYXNlIE9wdF9zZWNfbnRsbXYyOgot
CQl2b2wtPnNlY3R5cGUgPSBOVExNdjI7Ci0JCWJyZWFrOwotI2lmZGVmIENPTkZJR19DSUZTX1dF
QUtfUFdfSEFTSAotCWNhc2UgT3B0X3NlY19sYW5tYW46Ci0JCXZvbC0+c2VjdHlwZSA9IExBTk1B
TjsKLQkJYnJlYWs7Ci0jZW5kaWYKLQljYXNlIE9wdF9zZWNfbm9uZToKLQkJdm9sLT5udWxsYXV0
aCA9IDE7Ci0JCWJyZWFrOwotCWRlZmF1bHQ6Ci0JCWNpZnNfZGJnKFZGUywgImJhZCBzZWN1cml0
eSBvcHRpb246ICVzXG4iLCB2YWx1ZSk7Ci0JCXJldHVybiAxOwotCX0KLQotCXJldHVybiAwOwot
fQotCiBzdGF0aWMgaW50CiBjaWZzX3BhcnNlX2NhY2hlX2ZsYXZvcihjaGFyICp2YWx1ZSwgc3Ry
dWN0IHNtYl92b2wgKnZvbCkKIHsKZGlmZiAtLWdpdCBhL2ZzL2NpZnMvZnNfY29udGV4dC5jIGIv
ZnMvY2lmcy9mc19jb250ZXh0LmMKaW5kZXggZjUwZGZjMmQyZTQ0Li5kZDlkYTczNGUzNDYgMTAw
NjQ0Ci0tLSBhL2ZzL2NpZnMvZnNfY29udGV4dC5jCisrKyBiL2ZzL2NpZnMvZnNfY29udGV4dC5j
CkBAIC02LDMgKzYsNzkgQEAKICAqICAgICAgICAgICAgICBEYXZpZCBIb3dlbGxzIDxkaG93ZWxs
c0ByZWRoYXQuY29tPgogICovCiAKKyNpbmNsdWRlICJjaWZzZ2xvYi5oIgorI2luY2x1ZGUgImNp
ZnNfZGVidWcuaCIKKyNpbmNsdWRlICJmc19jb250ZXh0LmgiCisKK3N0YXRpYyBjb25zdCBtYXRj
aF90YWJsZV90IGNpZnNfc2VjZmxhdm9yX3Rva2VucyA9IHsKKwl7IE9wdF9zZWNfa3JiNSwgImty
YjUiIH0sCisJeyBPcHRfc2VjX2tyYjVpLCAia3JiNWkiIH0sCisJeyBPcHRfc2VjX2tyYjVwLCAi
a3JiNXAiIH0sCisJeyBPcHRfc2VjX250bG1zc3BpLCAibnRsbXNzcGkiIH0sCisJeyBPcHRfc2Vj
X250bG1zc3AsICJudGxtc3NwIiB9LAorCXsgT3B0X250bG0sICJudGxtIiB9LAorCXsgT3B0X3Nl
Y19udGxtaSwgIm50bG1pIiB9LAorCXsgT3B0X3NlY19udGxtdjIsICJub250bG0iIH0sCisJeyBP
cHRfc2VjX250bG12MiwgIm50bG12MiIgfSwKKwl7IE9wdF9zZWNfbnRsbXYyaSwgIm50bG12Mmki
IH0sCisJeyBPcHRfc2VjX2xhbm1hbiwgImxhbm1hbiIgfSwKKwl7IE9wdF9zZWNfbm9uZSwgIm5v
bmUiIH0sCisKKwl7IE9wdF9zZWNfZXJyLCBOVUxMIH0KK307CisKK2ludCBjaWZzX3BhcnNlX3Nl
Y3VyaXR5X2ZsYXZvcnMoY2hhciAqdmFsdWUsIHN0cnVjdCBzbWJfdm9sICp2b2wpCit7CisKKwlz
dWJzdHJpbmdfdCBhcmdzW01BWF9PUFRfQVJHU107CisKKwkvKgorCSAqIFdpdGggbW91bnQgb3B0
aW9ucywgdGhlIGxhc3Qgb25lIHNob3VsZCB3aW4uIFJlc2V0IGFueSBleGlzdGluZworCSAqIHNl
dHRpbmdzIGJhY2sgdG8gZGVmYXVsdC4KKwkgKi8KKwl2b2wtPnNlY3R5cGUgPSBVbnNwZWNpZmll
ZDsKKwl2b2wtPnNpZ24gPSBmYWxzZTsKKworCXN3aXRjaCAobWF0Y2hfdG9rZW4odmFsdWUsIGNp
ZnNfc2VjZmxhdm9yX3Rva2VucywgYXJncykpIHsKKwljYXNlIE9wdF9zZWNfa3JiNXA6CisJCWNp
ZnNfZGJnKFZGUywgInNlYz1rcmI1cCBpcyBub3Qgc3VwcG9ydGVkIVxuIik7CisJCXJldHVybiAx
OworCWNhc2UgT3B0X3NlY19rcmI1aToKKwkJdm9sLT5zaWduID0gdHJ1ZTsKKwkJZmFsbHRocm91
Z2g7CisJY2FzZSBPcHRfc2VjX2tyYjU6CisJCXZvbC0+c2VjdHlwZSA9IEtlcmJlcm9zOworCQli
cmVhazsKKwljYXNlIE9wdF9zZWNfbnRsbXNzcGk6CisJCXZvbC0+c2lnbiA9IHRydWU7CisJCWZh
bGx0aHJvdWdoOworCWNhc2UgT3B0X3NlY19udGxtc3NwOgorCQl2b2wtPnNlY3R5cGUgPSBSYXdO
VExNU1NQOworCQlicmVhazsKKwljYXNlIE9wdF9zZWNfbnRsbWk6CisJCXZvbC0+c2lnbiA9IHRy
dWU7CisJCWZhbGx0aHJvdWdoOworCWNhc2UgT3B0X250bG06CisJCXZvbC0+c2VjdHlwZSA9IE5U
TE07CisJCWJyZWFrOworCWNhc2UgT3B0X3NlY19udGxtdjJpOgorCQl2b2wtPnNpZ24gPSB0cnVl
OworCQlmYWxsdGhyb3VnaDsKKwljYXNlIE9wdF9zZWNfbnRsbXYyOgorCQl2b2wtPnNlY3R5cGUg
PSBOVExNdjI7CisJCWJyZWFrOworI2lmZGVmIENPTkZJR19DSUZTX1dFQUtfUFdfSEFTSAorCWNh
c2UgT3B0X3NlY19sYW5tYW46CisJCXZvbC0+c2VjdHlwZSA9IExBTk1BTjsKKwkJYnJlYWs7Cisj
ZW5kaWYKKwljYXNlIE9wdF9zZWNfbm9uZToKKwkJdm9sLT5udWxsYXV0aCA9IDE7CisJCWJyZWFr
OworCWRlZmF1bHQ6CisJCWNpZnNfZGJnKFZGUywgImJhZCBzZWN1cml0eSBvcHRpb246ICVzXG4i
LCB2YWx1ZSk7CisJCXJldHVybiAxOworCX0KKworCXJldHVybiAwOworfQpkaWZmIC0tZ2l0IGEv
ZnMvY2lmcy9mc19jb250ZXh0LmggYi9mcy9jaWZzL2ZzX2NvbnRleHQuaAppbmRleCAwODJmMjg2
ZjkyM2UuLjg3NzQ3ZWY3YTJkMyAxMDA2NDQKLS0tIGEvZnMvY2lmcy9mc19jb250ZXh0LmgKKysr
IGIvZnMvY2lmcy9mc19jb250ZXh0LmgKQEAgLTksNyArOSwyNSBAQAogI2lmbmRlZiBfRlNfQ09O
VEVYVF9ICiAjZGVmaW5lIF9GU19DT05URVhUX0gKIAorI2luY2x1ZGUgPGxpbnV4L3BhcnNlci5o
PgorI2luY2x1ZGUgImNpZnNnbG9iLmgiCiAKK2VudW0gY2lmc19zZWNfcGFyYW0geworCU9wdF9z
ZWNfa3JiNSwKKwlPcHRfc2VjX2tyYjVpLAorCU9wdF9zZWNfa3JiNXAsCisJT3B0X3NlY19udGxt
c3NwaSwKKwlPcHRfc2VjX250bG1zc3AsCisJT3B0X250bG0sCisJT3B0X3NlY19udGxtaSwKKwlP
cHRfc2VjX250bG12MiwKKwlPcHRfc2VjX250bG12MmksCisJT3B0X3NlY19sYW5tYW4sCisJT3B0
X3NlY19ub25lLAogCi0jZW5kaWYKKwlPcHRfc2VjX2VycgorfTsKKworaW50IGNpZnNfcGFyc2Vf
c2VjdXJpdHlfZmxhdm9ycyhjaGFyICp2YWx1ZSwgc3RydWN0IHNtYl92b2wgKnZvbCk7CiAKKyNl
bmRpZgotLSAKMi4yNS4xCgo=
--0000000000006a3fa405b2334e83--
