Return-Path: <linux-cifs+bounces-6596-lists+linux-cifs=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-cifs@lfdr.de
Delivered-To: lists+linux-cifs@lfdr.de
Received: from ams.mirrors.kernel.org (ams.mirrors.kernel.org [IPv6:2a01:60a::1994:3:14])
	by mail.lfdr.de (Postfix) with ESMTPS id 1FAECBBEC4F
	for <lists+linux-cifs@lfdr.de>; Mon, 06 Oct 2025 19:03:18 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ams.mirrors.kernel.org (Postfix) with ESMTPS id 709FA34A451
	for <lists+linux-cifs@lfdr.de>; Mon,  6 Oct 2025 17:03:17 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id A42EF211706;
	Mon,  6 Oct 2025 17:03:12 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (3072-bit key) header.d=samba.org header.i=@samba.org header.b="GQOUjedO"
X-Original-To: linux-cifs@vger.kernel.org
Received: from hr2.samba.org (hr2.samba.org [144.76.82.148])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 2AACA196C7C
	for <linux-cifs@vger.kernel.org>; Mon,  6 Oct 2025 17:03:08 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=144.76.82.148
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1759770192; cv=none; b=Z+p3r/ewxdEfYYzZK9oAe3AWP68YahUeVaHTjgSp+UJ4RRKqvo1RQhI7hFEfKQ8V0IzcOYvlEeOiTzBorb70c5kYw4ZbCcti5glXW1CScyTlPo4nKJQIfBDH6lA+/gfsfKMIbTgsZJWOm2WBa7kO25Xhd+iGqbOGokNU3b9kjWE=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1759770192; c=relaxed/simple;
	bh=iDCZldHrDtLisrvOPsfexg2EJnWbXYxrSANwPjDkWGw=;
	h=Message-ID:Date:MIME-Version:Subject:To:Cc:References:From:
	 In-Reply-To:Content-Type; b=TPVcVeGmJk5faJvb56xc8Qx/nYvG+qN9ofFH5FbtgJo/r5iu25jIFq7jWzyQOZ/8UzfvY6rTQsIweWKOF0z9aTCjjopZ8whiRSewfVD6UxX1uA6TkfQ/SPIRqF46/IP4jdhKOAK2q2wRgWtwFUoeqfLxebst0+ClFSU6dXFGUWc=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=samba.org; spf=pass smtp.mailfrom=samba.org; dkim=pass (3072-bit key) header.d=samba.org header.i=@samba.org header.b=GQOUjedO; arc=none smtp.client-ip=144.76.82.148
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=samba.org
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=samba.org
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=samba.org;
	s=42; h=From:Cc:To:Date:Message-ID;
	bh=iDCZldHrDtLisrvOPsfexg2EJnWbXYxrSANwPjDkWGw=; b=GQOUjedOpASpU1RCsi6B0NUAqe
	222UCiXqOyVIj6Xnr+9XPY14a4dLXf10KE/OBoHmWbZwQXYi+7aT1YV3Ok7SxnfGCvWXz052GlfFP
	vbMGD02onPPoR78ihjNYdFIglgVQHrYEvA1FFrN41PheSIoreZIIo8TEXJnBHvc+NzwT3ctxCLbQX
	zGYBawScJSLLyVzjf/ZgZgAJuba6uCoImIhQgTPSmE7jOuzVtJ3q0RNT8i1/RMY/jHHan+kGgL8ow
	zoyEqls2mC20+U5r0N39gB27pJJ0mw5DQajrXi8MbHkGAOoa++KV30Ayncdh3z4REiRDKVAA2cJZ5
	7GIwwWOUMFngF8PcMw5VwinipMTv3xQqNSgKFE4DNjI8/ZG1qpH1gG/rCqe4C+0WFc4Kr1vD81x0s
	MjmgovzeGfnerePE1ZPkWltj1pliB6F8VsTdCpkGSsABeWKPL8vNLhXW6jwaUOuSe6W3TdusY8NMo
	3dzbLu8nYokheADE/ovSHZow;
Received: from [127.0.0.2] (localhost [127.0.0.1])
	by hr2.samba.org with esmtpsa (TLS1.3:ECDHE_SECP256R1__ECDSA_SECP256R1_SHA256__CHACHA20_POLY1305:256)
	(Exim)
	id 1v5oc0-007kTQ-1D;
	Mon, 06 Oct 2025 17:03:00 +0000
Message-ID: <1262e7b6-9086-404e-b9a5-e9c6208b8120@samba.org>
Date: Mon, 6 Oct 2025 19:02:59 +0200
Precedence: bulk
X-Mailing-List: linux-cifs@vger.kernel.org
List-Id: <linux-cifs.vger.kernel.org>
List-Subscribe: <mailto:linux-cifs+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-cifs+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
User-Agent: Mozilla Thunderbird
Subject: Re: [PATCH 1/3] smb: client: fix missing timestamp updates with
 O_TRUNC
To: Paulo Alcantara <pc@manguebit.org>, smfrench@gmail.com
Cc: Frank Sorenson <sorenson@redhat.com>, David Howells
 <dhowells@redhat.com>, linux-cifs@vger.kernel.org
References: <20251006164220.67333-1-pc@manguebit.org>
Content-Language: en-US, de-DE
From: Ralph Boehme <slow@samba.org>
Autocrypt: addr=slow@samba.org; keydata=
 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
 R3NApzHw2ZqQDtSdciR9og==
In-Reply-To: <20251006164220.67333-1-pc@manguebit.org>
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="------------I4L0JSw4Vi5wuhv9fqvNRhXa"

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--------------I4L0JSw4Vi5wuhv9fqvNRhXa
Content-Type: multipart/mixed; boundary="------------hEuMvHhzTHYu0Zdmc3ZycHnM";
 protected-headers="v1"
From: Ralph Boehme <slow@samba.org>
To: Paulo Alcantara <pc@manguebit.org>, smfrench@gmail.com
Cc: Frank Sorenson <sorenson@redhat.com>, David Howells
 <dhowells@redhat.com>, linux-cifs@vger.kernel.org
Message-ID: <1262e7b6-9086-404e-b9a5-e9c6208b8120@samba.org>
Subject: Re: [PATCH 1/3] smb: client: fix missing timestamp updates with
 O_TRUNC
References: <20251006164220.67333-1-pc@manguebit.org>
In-Reply-To: <20251006164220.67333-1-pc@manguebit.org>

--------------hEuMvHhzTHYu0Zdmc3ZycHnM
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64

RndpdywgSSBoYXZlIGEgcGF0Y2ggaW4tZmxpZ2h0IHRoYXQgZGlzYWJsZXMgc3RpY2t5IHdy
aXRlIHRpbWUgYmVoYXZvdXIgDQpvbiBQT1NJWCBoYW5kbGVzIGluIFNhbWJhLg0KDQpPbiAx
MC82LzI1IDY6NDIgUE0sIFBhdWxvIEFsY2FudGFyYSB3cm90ZToNCj4gRG9uJ3QgY2FsbCAt
PnNldF9maWxlX2luZm8oKSBvbiBvcGVuIGhhbmRsZSB0byBwcmV2ZW50IHRoZSBzZXJ2ZXIg
ZnJvbQ0KPiBzdG9wcGluZyBbY21ddGltZSB1cGRhdGVzIGF1dG9tYXRpY2FsbHkgYXMgcGVy
IE1TLUZTQSAyLjEuNC4xNy4NCj4gDQo+IEZpeCB0aGlzIGJ5IGNoZWNraW5nIGZvciBBVFRS
X09QRU4gYml0IGVhcmxpZXIgaW4gY2lmc19zZXRhdHRyKCkgdG8NCj4gcHJldmVudCAtPnNl
dF9maWxlX2luZm8oKSBmcm9tIGJlaW5nIGNhbGxlZCB3aGVuIG9wZW5pbmcgYSBmaWxlIHdp
dGgNCj4gT19UUlVOQy4gIERvIHRoZSB0cnVuY2F0aW9uIGluIC0+b3BlbigpIGluc3RlYWQu
DQo+IA0KPiBUaGlzIGFsc28gc2F2ZXMgdHdvIHJvdW5kdHJpcHMgd2hlbiBvcGVuaW5nIGEg
ZmlsZSB3aXRoIE9fVFJVTkMgYW5kDQo+IHRoZXJlIGFyZSBjdXJyZW50bHkgbm8gb3BlbiBo
YW5kbGVzIHRvIGJlIHJldXNlZC4NCj4gDQo+IEJlZm9yZSBwYXRjaDoNCj4gDQo+ICQgbW91
bnQuY2lmcyAvL3Nydi9zaGFyZSAvbW50IC1vIC4uLg0KPiAkIGNkIC9tbnQNCj4gJCBleGVj
IDM+Zm9vOyBzdGF0IC1jICdvbGQ6ICV6ICV5JyBmb287IHNsZWVwIDI7IGVjaG8gdGVzdCA+
JjM7IGV4ZWMgMz4mLTsgc2xlZXAgMjsgc3RhdCAtYyAnbmV3OiAleiAleScgZm9vDQo+IG9s
ZDogMjAyNS0xMC0wMyAxMzoyNjoyMy4xNTEwMzA1MDAgLTAzMDAgMjAyNS0xMC0wMyAxMzoy
NjoyMy4xNTEwMzA1MDAgLTAzMDANCj4gbmV3OiAyMDI1LTEwLTAzIDEzOjI2OjIzLjE1MTAz
MDUwMCAtMDMwMCAyMDI1LTEwLTAzIDEzOjI2OjIzLjE1MTAzMDUwMCAtMDMwMA0KPiANCj4g
QWZ0ZXIgcGF0Y2g6DQo+IA0KPiAkIG1vdW50LmNpZnMgLy9zcnYvc2hhcmUgL21udCAtbyAu
Li4NCj4gJCBjZCAvbW50DQo+ICQgZXhlYyAzPmZvbzsgc3RhdCAtYyAnb2xkOiAleiAleScg
Zm9vOyBzbGVlcCAyOyBlY2hvIHRlc3QgPiYzOyBleGVjIDM+Ji07IHNsZWVwIDI7IHN0YXQg
LWMgJ25ldzogJXogJXknIGZvbw0KPiAkIGV4ZWMgMz5mb287IHN0YXQgLWMgJ29sZDogJXog
JXknIGZvbzsgc2xlZXAgMjsgZWNobyB0ZXN0ID4mMzsgZXhlYyAzPiYtOyBzbGVlcCAyOyBz
dGF0IC1jICduZXc6ICV6ICV5JyBmb28NCj4gb2xkOiAyMDI1LTEwLTAzIDEzOjI4OjEzLjkx
MTkzMzgwMCAtMDMwMCAyMDI1LTEwLTAzIDEzOjI4OjEzLjkxMTkzMzgwMCAtMDMwMA0KPiBu
ZXc6IDIwMjUtMTAtMDMgMTM6Mjg6MjYuNjQ3NDkyNzAwIC0wMzAwIDIwMjUtMTAtMDMgMTM6
Mjg6MjYuNjQ3NDkyNzAwIC0wMzAwDQo+IA0KPiBSZXBvcnRlZC1ieTogRnJhbmsgU29yZW5z
b24gPHNvcmVuc29uQHJlZGhhdC5jb20+DQo+IFNpZ25lZC1vZmYtYnk6IFBhdWxvIEFsY2Fu
dGFyYSAoUmVkIEhhdCkgPHBjQG1hbmd1ZWJpdC5vcmc+DQo+IENjOiBEYXZpZCBIb3dlbGxz
IDxkaG93ZWxsc0ByZWRoYXQuY29tPg0KPiBDYzogbGludXgtY2lmc0B2Z2VyLmtlcm5lbC5v
cmcNCj4gLS0tDQo+ICAgZnMvc21iL2NsaWVudC9jaWZzZ2xvYi5oIHwgICA1ICsrDQo+ICAg
ZnMvc21iL2NsaWVudC9maWxlLmMgICAgIHwgIDk0ICsrKysrKysrKysrKysrKysrLS0tLS0t
LQ0KPiAgIGZzL3NtYi9jbGllbnQvaW5vZGUuYyAgICB8IDE1MiArKysrKysrKysrKysrKysr
KysrKysrLS0tLS0tLS0tLS0tLS0tLS0NCj4gICAzIGZpbGVzIGNoYW5nZWQsIDE1OSBpbnNl
cnRpb25zKCspLCA5MiBkZWxldGlvbnMoLSkNCj4gDQo+IGRpZmYgLS1naXQgYS9mcy9zbWIv
Y2xpZW50L2NpZnNnbG9iLmggYi9mcy9zbWIvY2xpZW50L2NpZnNnbG9iLmgNCj4gaW5kZXgg
M2FjMjU0ZTEyM2RjLi44ZjZmNTY3ZDc0NzQgMTAwNjQ0DQo+IC0tLSBhL2ZzL3NtYi9jbGll
bnQvY2lmc2dsb2IuaA0KPiArKysgYi9mcy9zbWIvY2xpZW50L2NpZnNnbG9iLmgNCj4gQEAg
LTE1NjYsNiArMTU2NiwxMSBAQCBzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpjaWZzRmlsZUluZm9f
Z2V0KHN0cnVjdCBjaWZzRmlsZUluZm8gKmNpZnNfZmlsZSk7DQo+ICAgdm9pZCBfY2lmc0Zp
bGVJbmZvX3B1dChzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpjaWZzX2ZpbGUsIGJvb2wgd2FpdF9v
cGxvY2tfaGRsciwNCj4gICAJCSAgICAgICBib29sIG9mZmxvYWQpOw0KPiAgIHZvaWQgY2lm
c0ZpbGVJbmZvX3B1dChzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpjaWZzX2ZpbGUpOw0KPiAraW50
IGNpZnNfZmlsZV9mbHVzaChjb25zdCB1bnNpZ25lZCBpbnQgeGlkLCBzdHJ1Y3QgaW5vZGUg
Kmlub2RlLA0KPiArCQkgICAgc3RydWN0IGNpZnNGaWxlSW5mbyAqY2ZpbGUpOw0KPiAraW50
IGNpZnNfZmlsZV9zZXRfc2l6ZShjb25zdCB1bnNpZ25lZCBpbnQgeGlkLCBzdHJ1Y3QgZGVu
dHJ5ICpkZW50cnksDQo+ICsJCSAgICAgICBjb25zdCBjaGFyICpmdWxsX3BhdGgsIHN0cnVj
dCBjaWZzRmlsZUluZm8gKm9wZW5fZmlsZSwNCj4gKwkJICAgICAgIGxvZmZfdCBzaXplKTsN
Cj4gICANCj4gICAjZGVmaW5lIENJRlNfQ0FDSEVfUkVBRF9GTEcJMQ0KPiAgICNkZWZpbmUg
Q0lGU19DQUNIRV9IQU5ETEVfRkxHCTINCj4gZGlmZiAtLWdpdCBhL2ZzL3NtYi9jbGllbnQv
ZmlsZS5jIGIvZnMvc21iL2NsaWVudC9maWxlLmMNCj4gaW5kZXggYTVlZDc0MmFmYTAwLi5l
Y2JiNjNlNjY1MjEgMTAwNjQ0DQo+IC0tLSBhL2ZzL3NtYi9jbGllbnQvZmlsZS5jDQo+ICsr
KyBiL2ZzL3NtYi9jbGllbnQvZmlsZS5jDQo+IEBAIC05NTIsNiArOTUyLDY2IEBAIHZvaWQg
X2NpZnNGaWxlSW5mb19wdXQoc3RydWN0IGNpZnNGaWxlSW5mbyAqY2lmc19maWxlLA0KPiAg
IAl9DQo+ICAgfQ0KPiAgIA0KPiAraW50IGNpZnNfZmlsZV9mbHVzaChjb25zdCB1bnNpZ25l
ZCBpbnQgeGlkLCBzdHJ1Y3QgaW5vZGUgKmlub2RlLA0KPiArCQkgICAgc3RydWN0IGNpZnNG
aWxlSW5mbyAqY2ZpbGUpDQo+ICt7DQo+ICsJc3RydWN0IGNpZnNfc2JfaW5mbyAqY2lmc19z
YiA9IENJRlNfU0IoaW5vZGUtPmlfc2IpOw0KPiArCXN0cnVjdCBjaWZzX3Rjb24gKnRjb247
DQo+ICsJaW50IHJjOw0KPiArDQo+ICsJaWYgKGNpZnNfc2ItPm1udF9jaWZzX2ZsYWdzICYg
Q0lGU19NT1VOVF9OT1NTWU5DKQ0KPiArCQlyZXR1cm4gMDsNCj4gKw0KPiArCWlmIChjZmls
ZSAmJiAoT1BFTl9GTU9ERShjZmlsZS0+Zl9mbGFncykgJiBGTU9ERV9XUklURSkpIHsNCj4g
KwkJdGNvbiA9IHRsaW5rX3Rjb24oY2ZpbGUtPnRsaW5rKTsNCj4gKwkJcmV0dXJuIHRjb24t
PnNlcy0+c2VydmVyLT5vcHMtPmZsdXNoKHhpZCwgdGNvbiwNCj4gKwkJCQkJCSAgICAgJmNm
aWxlLT5maWQpOw0KPiArCX0NCj4gKwlyYyA9IGNpZnNfZ2V0X3dyaXRhYmxlX2ZpbGUoQ0lG
U19JKGlub2RlKSwgRklORF9XUl9BTlksICZjZmlsZSk7DQo+ICsJaWYgKCFyYykgew0KPiAr
CQl0Y29uID0gdGxpbmtfdGNvbihjZmlsZS0+dGxpbmspOw0KPiArCQlyYyA9IHRjb24tPnNl
cy0+c2VydmVyLT5vcHMtPmZsdXNoKHhpZCwgdGNvbiwgJmNmaWxlLT5maWQpOw0KPiArCQlj
aWZzRmlsZUluZm9fcHV0KGNmaWxlKTsNCj4gKwl9IGVsc2UgaWYgKHJjID09IC1FQkFERikg
ew0KPiArCQlyYyA9IDA7DQo+ICsJfQ0KPiArCXJldHVybiByYzsNCj4gK30NCj4gKw0KPiAr
c3RhdGljIGludCBjaWZzX2RvX3RydW5jYXRlKGNvbnN0IHVuc2lnbmVkIGludCB4aWQsIHN0
cnVjdCBkZW50cnkgKmRlbnRyeSkNCj4gK3sNCj4gKwlzdHJ1Y3QgY2lmc0lub2RlSW5mbyAq
Y2lub2RlID0gQ0lGU19JKGRfaW5vZGUoZGVudHJ5KSk7DQo+ICsJc3RydWN0IGlub2RlICpp
bm9kZSA9IGRfaW5vZGUoZGVudHJ5KTsNCj4gKwlzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpjZmls
ZSA9IE5VTEw7DQo+ICsJc3RydWN0IFRDUF9TZXJ2ZXJfSW5mbyAqc2VydmVyOw0KPiArCXN0
cnVjdCBjaWZzX3Rjb24gKnRjb247DQo+ICsJaW50IHJjOw0KPiArDQo+ICsJcmMgPSBmaWxl
bWFwX3dyaXRlX2FuZF93YWl0KGlub2RlLT5pX21hcHBpbmcpOw0KPiArCWlmIChpc19pbnRl
cnJ1cHRfZXJyb3IocmMpKQ0KPiArCQlyZXR1cm4gLUVSRVNUQVJUU1lTOw0KPiArCW1hcHBp
bmdfc2V0X2Vycm9yKGlub2RlLT5pX21hcHBpbmcsIHJjKTsNCj4gKw0KPiArCWNmaWxlID0g
ZmluZF93cml0YWJsZV9maWxlKGNpbm9kZSwgRklORF9XUl9GU1VJRF9PTkxZKTsNCj4gKwly
YyA9IGNpZnNfZmlsZV9mbHVzaCh4aWQsIGlub2RlLCBjZmlsZSk7DQo+ICsJaWYgKCFyYykg
ew0KPiArCQlpZiAoY2ZpbGUpIHsNCj4gKwkJCXRjb24gPSB0bGlua190Y29uKGNmaWxlLT50
bGluayk7DQo+ICsJCQlzZXJ2ZXIgPSB0Y29uLT5zZXMtPnNlcnZlcjsNCj4gKwkJCXJjID0g
c2VydmVyLT5vcHMtPnNldF9maWxlX3NpemUoeGlkLCB0Y29uLA0KPiArCQkJCQkJCWNmaWxl
LCAwLCBmYWxzZSk7DQo+ICsJCX0NCj4gKwkJaWYgKCFyYykgew0KPiArCQkJbmV0ZnNfcmVz
aXplX2ZpbGUoJmNpbm9kZS0+bmV0ZnMsIDAsIHRydWUpOw0KPiArCQkJY2lmc19zZXRzaXpl
KGlub2RlLCAwKTsNCj4gKwkJCWlub2RlLT5pX2Jsb2NrcyA9IDA7DQo+ICsJCX0NCj4gKwl9
DQo+ICsJaWYgKGNmaWxlKQ0KPiArCQljaWZzRmlsZUluZm9fcHV0KGNmaWxlKTsNCj4gKwly
ZXR1cm4gcmM7DQo+ICt9DQo+ICsNCj4gICBpbnQgY2lmc19vcGVuKHN0cnVjdCBpbm9kZSAq
aW5vZGUsIHN0cnVjdCBmaWxlICpmaWxlKQ0KPiAgIA0KPiAgIHsNCj4gQEAgLTEwMDQsNiAr
MTA2NCwxMiBAQCBpbnQgY2lmc19vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBm
aWxlICpmaWxlKQ0KPiAgIAkJCWZpbGUtPmZfb3AgPSAmY2lmc19maWxlX2RpcmVjdF9vcHM7
DQo+ICAgCX0NCj4gICANCj4gKwlpZiAoZmlsZS0+Zl9mbGFncyAmIE9fVFJVTkMpIHsNCj4g
KwkJcmMgPSBjaWZzX2RvX3RydW5jYXRlKHhpZCwgZmlsZV9kZW50cnkoZmlsZSkpOw0KPiAr
CQlpZiAocmMpDQo+ICsJCQlnb3RvIG91dDsNCj4gKwl9DQo+ICsNCj4gICAJLyogR2V0IHRo
ZSBjYWNoZWQgaGFuZGxlIGFzIFNNQjIgY2xvc2UgaXMgZGVmZXJyZWQgKi8NCj4gICAJaWYg
KE9QRU5fRk1PREUoZmlsZS0+Zl9mbGFncykgJiBGTU9ERV9XUklURSkgew0KPiAgIAkJcmMg
PSBjaWZzX2dldF93cml0YWJsZV9wYXRoKHRjb24sIGZ1bGxfcGF0aCwNCj4gQEAgLTI2ODUs
MTMgKzI3NTEsMTAgQEAgY2lmc19nZXRfcmVhZGFibGVfcGF0aChzdHJ1Y3QgY2lmc190Y29u
ICp0Y29uLCBjb25zdCBjaGFyICpuYW1lLA0KPiAgIGludCBjaWZzX3N0cmljdF9mc3luYyhz
dHJ1Y3QgZmlsZSAqZmlsZSwgbG9mZl90IHN0YXJ0LCBsb2ZmX3QgZW5kLA0KPiAgIAkJICAg
ICAgaW50IGRhdGFzeW5jKQ0KPiAgIHsNCj4gLQl1bnNpZ25lZCBpbnQgeGlkOw0KPiAtCWlu
dCByYyA9IDA7DQo+IC0Jc3RydWN0IGNpZnNfdGNvbiAqdGNvbjsNCj4gLQlzdHJ1Y3QgVENQ
X1NlcnZlcl9JbmZvICpzZXJ2ZXI7DQo+ICAgCXN0cnVjdCBjaWZzRmlsZUluZm8gKnNtYmZp
bGUgPSBmaWxlLT5wcml2YXRlX2RhdGE7DQo+ICAgCXN0cnVjdCBpbm9kZSAqaW5vZGUgPSBm
aWxlX2lub2RlKGZpbGUpOw0KPiAtCXN0cnVjdCBjaWZzX3NiX2luZm8gKmNpZnNfc2IgPSBD
SUZTX1NCKGlub2RlLT5pX3NiKTsNCj4gKwl1bnNpZ25lZCBpbnQgeGlkOw0KPiArCWludCBy
YyA9IDA7DQo+ICAgDQo+ICAgCXJjID0gZmlsZV93cml0ZV9hbmRfd2FpdF9yYW5nZShmaWxl
LCBzdGFydCwgZW5kKTsNCj4gICAJaWYgKHJjKSB7DQo+IEBAIC0yNzEyLDI2ICsyNzc1LDcg
QEAgaW50IGNpZnNfc3RyaWN0X2ZzeW5jKHN0cnVjdCBmaWxlICpmaWxlLCBsb2ZmX3Qgc3Rh
cnQsIGxvZmZfdCBlbmQsDQo+ICAgCQl9DQo+ICAgCX0NCj4gICANCj4gLQl0Y29uID0gdGxp
bmtfdGNvbihzbWJmaWxlLT50bGluayk7DQo+IC0JaWYgKCEoY2lmc19zYi0+bW50X2NpZnNf
ZmxhZ3MgJiBDSUZTX01PVU5UX05PU1NZTkMpKSB7DQo+IC0JCXNlcnZlciA9IHRjb24tPnNl
cy0+c2VydmVyOw0KPiAtCQlpZiAoc2VydmVyLT5vcHMtPmZsdXNoID09IE5VTEwpIHsNCj4g
LQkJCXJjID0gLUVOT1NZUzsNCj4gLQkJCWdvdG8gc3RyaWN0X2ZzeW5jX2V4aXQ7DQo+IC0J
CX0NCj4gLQ0KPiAtCQlpZiAoKE9QRU5fRk1PREUoc21iZmlsZS0+Zl9mbGFncykgJiBGTU9E
RV9XUklURSkgPT0gMCkgew0KPiAtCQkJc21iZmlsZSA9IGZpbmRfd3JpdGFibGVfZmlsZShD
SUZTX0koaW5vZGUpLCBGSU5EX1dSX0FOWSk7DQo+IC0JCQlpZiAoc21iZmlsZSkgew0KPiAt
CQkJCXJjID0gc2VydmVyLT5vcHMtPmZsdXNoKHhpZCwgdGNvbiwgJnNtYmZpbGUtPmZpZCk7
DQo+IC0JCQkJY2lmc0ZpbGVJbmZvX3B1dChzbWJmaWxlKTsNCj4gLQkJCX0gZWxzZQ0KPiAt
CQkJCWNpZnNfZGJnKEZZSSwgImlnbm9yZSBmc3luYyBmb3IgZmlsZSBub3Qgb3BlbiBmb3Ig
d3JpdGVcbiIpOw0KPiAtCQl9IGVsc2UNCj4gLQkJCXJjID0gc2VydmVyLT5vcHMtPmZsdXNo
KHhpZCwgdGNvbiwgJnNtYmZpbGUtPmZpZCk7DQo+IC0JfQ0KPiAtDQo+IC1zdHJpY3RfZnN5
bmNfZXhpdDoNCj4gKwlyYyA9IGNpZnNfZmlsZV9mbHVzaCh4aWQsIGlub2RlLCBzbWJmaWxl
KTsNCj4gICAJZnJlZV94aWQoeGlkKTsNCj4gICAJcmV0dXJuIHJjOw0KPiAgIH0NCj4gZGlm
ZiAtLWdpdCBhL2ZzL3NtYi9jbGllbnQvaW5vZGUuYyBiL2ZzL3NtYi9jbGllbnQvaW5vZGUu
Yw0KPiBpbmRleCA4YmI1NDRiZTQwMWUuLjE3ZDNmYTlmODhmYyAxMDA2NDQNCj4gLS0tIGEv
ZnMvc21iL2NsaWVudC9pbm9kZS5jDQo+ICsrKyBiL2ZzL3NtYi9jbGllbnQvaW5vZGUuYw0K
PiBAQCAtMzAwNywyOCArMzAwNywyNCBAQCBpbnQgY2lmc19maWVtYXAoc3RydWN0IGlub2Rl
ICppbm9kZSwgc3RydWN0IGZpZW1hcF9leHRlbnRfaW5mbyAqZmVpLCB1NjQgc3RhcnQsDQo+
ICAgDQo+ICAgdm9pZCBjaWZzX3NldHNpemUoc3RydWN0IGlub2RlICppbm9kZSwgbG9mZl90
IG9mZnNldCkNCj4gICB7DQo+IC0Jc3RydWN0IGNpZnNJbm9kZUluZm8gKmNpZnNfaSA9IENJ
RlNfSShpbm9kZSk7DQo+IC0NCj4gICAJc3Bpbl9sb2NrKCZpbm9kZS0+aV9sb2NrKTsNCj4g
ICAJaV9zaXplX3dyaXRlKGlub2RlLCBvZmZzZXQpOw0KPiAgIAlzcGluX3VubG9jaygmaW5v
ZGUtPmlfbG9jayk7DQo+IC0NCj4gLQkvKiBDYWNoZWQgaW5vZGUgbXVzdCBiZSByZWZyZXNo
ZWQgb24gdHJ1bmNhdGUgKi8NCj4gLQljaWZzX2ktPnRpbWUgPSAwOw0KPiArCWlub2RlX3Nl
dF9tdGltZV90b190cyhpbm9kZSwgaW5vZGVfc2V0X2N0aW1lX2N1cnJlbnQoaW5vZGUpKTsN
Cj4gICAJdHJ1bmNhdGVfcGFnZWNhY2hlKGlub2RlLCBvZmZzZXQpOw0KPiAgIH0NCj4gICAN
Cj4gLXN0YXRpYyBpbnQNCj4gLWNpZnNfc2V0X2ZpbGVfc2l6ZShzdHJ1Y3QgaW5vZGUgKmlu
b2RlLCBzdHJ1Y3QgaWF0dHIgKmF0dHJzLA0KPiAtCQkgICB1bnNpZ25lZCBpbnQgeGlkLCBj
b25zdCBjaGFyICpmdWxsX3BhdGgsIHN0cnVjdCBkZW50cnkgKmRlbnRyeSkNCj4gK2ludCBj
aWZzX2ZpbGVfc2V0X3NpemUoY29uc3QgdW5zaWduZWQgaW50IHhpZCwgc3RydWN0IGRlbnRy
eSAqZGVudHJ5LA0KPiArCQkgICAgICAgY29uc3QgY2hhciAqZnVsbF9wYXRoLCBzdHJ1Y3Qg
Y2lmc0ZpbGVJbmZvICpvcGVuX2ZpbGUsDQo+ICsJCSAgICAgICBsb2ZmX3Qgc2l6ZSkNCj4g
ICB7DQo+IC0JaW50IHJjOw0KPiAtCXN0cnVjdCBjaWZzRmlsZUluZm8gKm9wZW5fZmlsZTsN
Cj4gLQlzdHJ1Y3QgY2lmc0lub2RlSW5mbyAqY2lmc0lub2RlID0gQ0lGU19JKGlub2RlKTsN
Cj4gKwlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gZF9pbm9kZShkZW50cnkpOw0KPiAgIAlzdHJ1
Y3QgY2lmc19zYl9pbmZvICpjaWZzX3NiID0gQ0lGU19TQihpbm9kZS0+aV9zYik7DQo+ICsJ
c3RydWN0IGNpZnNJbm9kZUluZm8gKmNpZnNJbm9kZSA9IENJRlNfSShpbm9kZSk7DQo+ICAg
CXN0cnVjdCB0Y29uX2xpbmsgKnRsaW5rID0gTlVMTDsNCj4gICAJc3RydWN0IGNpZnNfdGNv
biAqdGNvbiA9IE5VTEw7DQo+ICAgCXN0cnVjdCBUQ1BfU2VydmVyX0luZm8gKnNlcnZlcjsN
Cj4gKwlpbnQgcmMgPSAtRUlOVkFMOw0KPiAgIA0KPiAgIAkvKg0KPiAgIAkgKiBUbyBhdm9p
ZCBzcHVyaW91cyBvcGxvY2sgYnJlYWtzIGZyb20gc2VydmVyLCBpbiB0aGUgY2FzZSBvZg0K
PiBAQCAtMzAzOSwxOSArMzAzNSwyNSBAQCBjaWZzX3NldF9maWxlX3NpemUoc3RydWN0IGlu
b2RlICppbm9kZSwgc3RydWN0IGlhdHRyICphdHRycywNCj4gICAJICogd3JpdGViZWhpbmQg
ZGF0YSB0aGFuIHRoZSBTTUIgdGltZW91dCBmb3IgdGhlIFNldFBhdGhJbmZvDQo+ICAgCSAq
IHJlcXVlc3Qgd291bGQgYWxsb3cNCj4gICAJICovDQo+IC0Jb3Blbl9maWxlID0gZmluZF93
cml0YWJsZV9maWxlKGNpZnNJbm9kZSwgRklORF9XUl9GU1VJRF9PTkxZKTsNCj4gLQlpZiAo
b3Blbl9maWxlKSB7DQo+ICsJaWYgKG9wZW5fZmlsZSAmJiAoT1BFTl9GTU9ERShvcGVuX2Zp
bGUtPmZfZmxhZ3MpICYgRk1PREVfV1JJVEUpKSB7DQo+ICAgCQl0Y29uID0gdGxpbmtfdGNv
bihvcGVuX2ZpbGUtPnRsaW5rKTsNCj4gICAJCXNlcnZlciA9IHRjb24tPnNlcy0+c2VydmVy
Ow0KPiAtCQlpZiAoc2VydmVyLT5vcHMtPnNldF9maWxlX3NpemUpDQo+IC0JCQlyYyA9IHNl
cnZlci0+b3BzLT5zZXRfZmlsZV9zaXplKHhpZCwgdGNvbiwgb3Blbl9maWxlLA0KPiAtCQkJ
CQkJCWF0dHJzLT5pYV9zaXplLCBmYWxzZSk7DQo+IC0JCWVsc2UNCj4gLQkJCXJjID0gLUVO
T1NZUzsNCj4gLQkJY2lmc0ZpbGVJbmZvX3B1dChvcGVuX2ZpbGUpOw0KPiAtCQljaWZzX2Ri
ZyhGWUksICJTZXRGU2l6ZSBmb3IgYXR0cnMgcmMgPSAlZFxuIiwgcmMpOw0KPiAtCX0gZWxz
ZQ0KPiAtCQlyYyA9IC1FSU5WQUw7DQo+ICsJCXJjID0gc2VydmVyLT5vcHMtPnNldF9maWxl
X3NpemUoeGlkLCB0Y29uLA0KPiArCQkJCQkJb3Blbl9maWxlLA0KPiArCQkJCQkJc2l6ZSwg
ZmFsc2UpOw0KPiArCQljaWZzX2RiZyhGWUksICIlczogc2V0X2ZpbGVfc2l6ZTogcmMgPSAl
ZFxuIiwgX19mdW5jX18sIHJjKTsNCj4gKwl9IGVsc2Ugew0KPiArCQlvcGVuX2ZpbGUgPSBm
aW5kX3dyaXRhYmxlX2ZpbGUoY2lmc0lub2RlLCBGSU5EX1dSX0ZTVUlEX09OTFkpOw0KPiAr
CQlpZiAob3Blbl9maWxlKSB7DQo+ICsJCQl0Y29uID0gdGxpbmtfdGNvbihvcGVuX2ZpbGUt
PnRsaW5rKTsNCj4gKwkJCXNlcnZlciA9IHRjb24tPnNlcy0+c2VydmVyOw0KPiArCQkJcmMg
PSBzZXJ2ZXItPm9wcy0+c2V0X2ZpbGVfc2l6ZSh4aWQsIHRjb24sDQo+ICsJCQkJCQkJb3Bl
bl9maWxlLA0KPiArCQkJCQkJCXNpemUsIGZhbHNlKTsNCj4gKwkJCWNpZnNfZGJnKEZZSSwg
IiVzOiBzZXRfZmlsZV9zaXplOiByYyA9ICVkXG4iLCBfX2Z1bmNfXywgcmMpOw0KPiArCQkJ
Y2lmc0ZpbGVJbmZvX3B1dChvcGVuX2ZpbGUpOw0KPiArCQl9DQo+ICsJfQ0KPiAgIA0KPiAg
IAlpZiAoIXJjKQ0KPiAgIAkJZ290byBzZXRfc2l6ZV9vdXQ7DQo+IEBAIC0zMDY5LDIwICsz
MDcxLDE1IEBAIGNpZnNfc2V0X2ZpbGVfc2l6ZShzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1
Y3QgaWF0dHIgKmF0dHJzLA0KPiAgIAkgKiB2YWxpZCwgd3JpdGVhYmxlIGZpbGUgaGFuZGxl
IGZvciBpdCB3YXMgZm91bmQgb3IgYmVjYXVzZSB0aGVyZSB3YXMNCj4gICAJICogYW4gZXJy
b3Igc2V0dGluZyBpdCBieSBoYW5kbGUuDQo+ICAgCSAqLw0KPiAtCWlmIChzZXJ2ZXItPm9w
cy0+c2V0X3BhdGhfc2l6ZSkNCj4gLQkJcmMgPSBzZXJ2ZXItPm9wcy0+c2V0X3BhdGhfc2l6
ZSh4aWQsIHRjb24sIGZ1bGxfcGF0aCwNCj4gLQkJCQkJCWF0dHJzLT5pYV9zaXplLCBjaWZz
X3NiLCBmYWxzZSwgZGVudHJ5KTsNCj4gLQllbHNlDQo+IC0JCXJjID0gLUVOT1NZUzsNCj4g
LQljaWZzX2RiZyhGWUksICJTZXRFT0YgYnkgcGF0aCAoc2V0YXR0cnMpIHJjID0gJWRcbiIs
IHJjKTsNCj4gLQ0KPiAtCWlmICh0bGluaykNCj4gLQkJY2lmc19wdXRfdGxpbmsodGxpbmsp
Ow0KPiArCXJjID0gc2VydmVyLT5vcHMtPnNldF9wYXRoX3NpemUoeGlkLCB0Y29uLCBmdWxs
X3BhdGgsIHNpemUsDQo+ICsJCQkJCWNpZnNfc2IsIGZhbHNlLCBkZW50cnkpOw0KPiArCWNp
ZnNfZGJnKEZZSSwgIiVzOiBTZXRFT0YgYnkgcGF0aCAoc2V0YXR0cnMpIHJjID0gJWRcbiIs
IF9fZnVuY19fLCByYyk7DQo+ICsJY2lmc19wdXRfdGxpbmsodGxpbmspOw0KPiAgIA0KPiAg
IHNldF9zaXplX291dDoNCj4gICAJaWYgKHJjID09IDApIHsNCj4gLQkJbmV0ZnNfcmVzaXpl
X2ZpbGUoJmNpZnNJbm9kZS0+bmV0ZnMsIGF0dHJzLT5pYV9zaXplLCB0cnVlKTsNCj4gLQkJ
Y2lmc19zZXRzaXplKGlub2RlLCBhdHRycy0+aWFfc2l6ZSk7DQo+ICsJCW5ldGZzX3Jlc2l6
ZV9maWxlKCZjaWZzSW5vZGUtPm5ldGZzLCBzaXplLCB0cnVlKTsNCj4gKwkJY2lmc19zZXRz
aXplKGlub2RlLCBzaXplKTsNCj4gICAJCS8qDQo+ICAgCQkgKiBpX2Jsb2NrcyBpcyBub3Qg
cmVsYXRlZCB0byAoaV9zaXplIC8gaV9ibGtzaXplKSwgYnV0IGluc3RlYWQNCj4gICAJCSAq
IDUxMiBieXRlICgyKio5KSBzaXplIGlzIHJlcXVpcmVkIGZvciBjYWxjdWxhdGluZyBudW0g
YmxvY2tzLg0KPiBAQCAtMzA5MCwxNSArMzA4Nyw3IEBAIGNpZnNfc2V0X2ZpbGVfc2l6ZShz
dHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgaWF0dHIgKmF0dHJzLA0KPiAgIAkJICogdGhp
cyBpcyBiZXN0IGVzdGltYXRlIHdlIGhhdmUgZm9yIGJsb2NrcyBhbGxvY2F0ZWQgZm9yIGEg
ZmlsZQ0KPiAgIAkJICogTnVtYmVyIG9mIGJsb2NrcyBtdXN0IGJlIHJvdW5kZWQgdXAgc28g
c2l6ZSAxIGlzIG5vdCAwIGJsb2Nrcw0KPiAgIAkJICovDQo+IC0JCWlub2RlLT5pX2Jsb2Nr
cyA9ICg1MTIgLSAxICsgYXR0cnMtPmlhX3NpemUpID4+IDk7DQo+IC0NCj4gLQkJLyoNCj4g
LQkJICogVGhlIG1hbiBwYWdlIG9mIHRydW5jYXRlIHNheXMgaWYgdGhlIHNpemUgY2hhbmdl
ZCwNCj4gLQkJICogdGhlbiB0aGUgc3RfY3RpbWUgYW5kIHN0X210aW1lIGZpZWxkcyBmb3Ig
dGhlIGZpbGUNCj4gLQkJICogYXJlIHVwZGF0ZWQuDQo+IC0JCSAqLw0KPiAtCQlhdHRycy0+
aWFfY3RpbWUgPSBhdHRycy0+aWFfbXRpbWUgPSBjdXJyZW50X3RpbWUoaW5vZGUpOw0KPiAt
CQlhdHRycy0+aWFfdmFsaWQgfD0gQVRUUl9DVElNRSB8IEFUVFJfTVRJTUU7DQo+ICsJCWlu
b2RlLT5pX2Jsb2NrcyA9IERJVl9ST1VORF9VUChzaXplLCA1MTIpOw0KPiAgIAl9DQo+ICAg
DQo+ICAgCXJldHVybiByYzsNCj4gQEAgLTMxMTgsNyArMzEwNyw3IEBAIGNpZnNfc2V0YXR0
cl91bml4KHN0cnVjdCBkZW50cnkgKmRpcmVudHJ5LCBzdHJ1Y3QgaWF0dHIgKmF0dHJzKQ0K
PiAgIAlzdHJ1Y3QgdGNvbl9saW5rICp0bGluazsNCj4gICAJc3RydWN0IGNpZnNfdGNvbiAq
cFRjb247DQo+ICAgCXN0cnVjdCBjaWZzX3VuaXhfc2V0X2luZm9fYXJncyAqYXJncyA9IE5V
TEw7DQo+IC0Jc3RydWN0IGNpZnNGaWxlSW5mbyAqb3Blbl9maWxlOw0KPiArCXN0cnVjdCBj
aWZzRmlsZUluZm8gKm9wZW5fZmlsZSA9IE5VTEw7DQo+ICAgDQo+ICAgCWNpZnNfZGJnKEZZ
SSwgInNldGF0dHJfdW5peCBvbiBmaWxlICVwZCBhdHRycy0+aWFfdmFsaWQ9MHgleFxuIiwN
Cj4gICAJCSBkaXJlbnRyeSwgYXR0cnMtPmlhX3ZhbGlkKTsNCj4gQEAgLTMxMzIsNiArMzEy
MSw5IEBAIGNpZnNfc2V0YXR0cl91bml4KHN0cnVjdCBkZW50cnkgKmRpcmVudHJ5LCBzdHJ1
Y3QgaWF0dHIgKmF0dHJzKQ0KPiAgIAlpZiAocmMgPCAwKQ0KPiAgIAkJZ290byBvdXQ7DQo+
ICAgDQo+ICsJaWYgKGF0dHJzLT5pYV92YWxpZCAmIEFUVFJfRklMRSkNCj4gKwkJb3Blbl9m
aWxlID0gYXR0cnMtPmlhX2ZpbGUtPnByaXZhdGVfZGF0YTsNCj4gKw0KPiAgIAlmdWxsX3Bh
dGggPSBidWlsZF9wYXRoX2Zyb21fZGVudHJ5KGRpcmVudHJ5LCBwYWdlKTsNCj4gICAJaWYg
KElTX0VSUihmdWxsX3BhdGgpKSB7DQo+ICAgCQlyYyA9IFBUUl9FUlIoZnVsbF9wYXRoKTsN
Cj4gQEAgLTMxNTksOSArMzE1MSwxNyBAQCBjaWZzX3NldGF0dHJfdW5peChzdHJ1Y3QgZGVu
dHJ5ICpkaXJlbnRyeSwgc3RydWN0IGlhdHRyICphdHRycykNCj4gICAJcmMgPSAwOw0KPiAg
IA0KPiAgIAlpZiAoYXR0cnMtPmlhX3ZhbGlkICYgQVRUUl9TSVpFKSB7DQo+IC0JCXJjID0g
Y2lmc19zZXRfZmlsZV9zaXplKGlub2RlLCBhdHRycywgeGlkLCBmdWxsX3BhdGgsIGRpcmVu
dHJ5KTsNCj4gKwkJcmMgPSBjaWZzX2ZpbGVfc2V0X3NpemUoeGlkLCBkaXJlbnRyeSwgZnVs
bF9wYXRoLA0KPiArCQkJCQlvcGVuX2ZpbGUsIGF0dHJzLT5pYV9zaXplKTsNCj4gICAJCWlm
IChyYyAhPSAwKQ0KPiAgIAkJCWdvdG8gb3V0Ow0KPiArCQkvKg0KPiArCQkgKiBUaGUgbWFu
IHBhZ2Ugb2YgdHJ1bmNhdGUgc2F5cyBpZiB0aGUgc2l6ZSBjaGFuZ2VkLA0KPiArCQkgKiB0
aGVuIHRoZSBzdF9jdGltZSBhbmQgc3RfbXRpbWUgZmllbGRzIGZvciB0aGUgZmlsZQ0KPiAr
CQkgKiBhcmUgdXBkYXRlZC4NCj4gKwkJICovDQo+ICsJCWF0dHJzLT5pYV9jdGltZSA9IGF0
dHJzLT5pYV9tdGltZSA9IGN1cnJlbnRfdGltZShpbm9kZSk7DQo+ICsJCWF0dHJzLT5pYV92
YWxpZCB8PSBBVFRSX0NUSU1FIHwgQVRUUl9NVElNRTsNCj4gICAJfQ0KPiAgIA0KPiAgIAkv
KiBza2lwIG1vZGUgY2hhbmdlIGlmIGl0J3MganVzdCBmb3IgY2xlYXJpbmcgc2V0dWlkL3Nl
dGdpZCAqLw0KPiBAQCAtMzIwNiwxNCArMzIwNiwyNCBAQCBjaWZzX3NldGF0dHJfdW5peChz
dHJ1Y3QgZGVudHJ5ICpkaXJlbnRyeSwgc3RydWN0IGlhdHRyICphdHRycykNCj4gICAJCWFy
Z3MtPmN0aW1lID0gTk9fQ0hBTkdFXzY0Ow0KPiAgIA0KPiAgIAlhcmdzLT5kZXZpY2UgPSAw
Ow0KPiAtCW9wZW5fZmlsZSA9IGZpbmRfd3JpdGFibGVfZmlsZShjaWZzSW5vZGUsIEZJTkRf
V1JfRlNVSURfT05MWSk7DQo+IC0JaWYgKG9wZW5fZmlsZSkgew0KPiAtCQl1MTYgbmZpZCA9
IG9wZW5fZmlsZS0+ZmlkLm5ldGZpZDsNCj4gLQkJdTMyIG5waWQgPSBvcGVuX2ZpbGUtPnBp
ZDsNCj4gKwlyYyA9IC1FSU5WQUw7DQo+ICsJaWYgKG9wZW5fZmlsZSAmJiAoT1BFTl9GTU9E
RShvcGVuX2ZpbGUtPmZfZmxhZ3MpICYgRk1PREVfV1JJVEUpKSB7DQo+ICAgCQlwVGNvbiA9
IHRsaW5rX3Rjb24ob3Blbl9maWxlLT50bGluayk7DQo+IC0JCXJjID0gQ0lGU1NNQlVuaXhT
ZXRGaWxlSW5mbyh4aWQsIHBUY29uLCBhcmdzLCBuZmlkLCBucGlkKTsNCj4gLQkJY2lmc0Zp
bGVJbmZvX3B1dChvcGVuX2ZpbGUpOw0KPiArCQlyYyA9IENJRlNTTUJVbml4U2V0RmlsZUlu
Zm8oeGlkLCBwVGNvbiwgYXJncywNCj4gKwkJCQkJICAgIG9wZW5fZmlsZS0+ZmlkLm5ldGZp
ZCwNCj4gKwkJCQkJICAgIG9wZW5fZmlsZS0+cGlkKTsNCj4gICAJfSBlbHNlIHsNCj4gKwkJ
b3Blbl9maWxlID0gZmluZF93cml0YWJsZV9maWxlKGNpZnNJbm9kZSwgRklORF9XUl9GU1VJ
RF9PTkxZKTsNCj4gKwkJaWYgKG9wZW5fZmlsZSkgew0KPiArCQkJcFRjb24gPSB0bGlua190
Y29uKG9wZW5fZmlsZS0+dGxpbmspOw0KPiArCQkJcmMgPSBDSUZTU01CVW5peFNldEZpbGVJ
bmZvKHhpZCwgcFRjb24sIGFyZ3MsDQo+ICsJCQkJCQkgICAgb3Blbl9maWxlLT5maWQubmV0
ZmlkLA0KPiArCQkJCQkJICAgIG9wZW5fZmlsZS0+cGlkKTsNCj4gKwkJCWNpZnNGaWxlSW5m
b19wdXQob3Blbl9maWxlKTsNCj4gKwkJfQ0KPiArCX0NCj4gKw0KPiArCWlmIChyYykgew0K
PiAgIAkJdGxpbmsgPSBjaWZzX3NiX3RsaW5rKGNpZnNfc2IpOw0KPiAgIAkJaWYgKElTX0VS
Uih0bGluaykpIHsNCj4gICAJCQlyYyA9IFBUUl9FUlIodGxpbmspOw0KPiBAQCAtMzIyMSw4
ICszMjMxLDggQEAgY2lmc19zZXRhdHRyX3VuaXgoc3RydWN0IGRlbnRyeSAqZGlyZW50cnks
IHN0cnVjdCBpYXR0ciAqYXR0cnMpDQo+ICAgCQl9DQo+ICAgCQlwVGNvbiA9IHRsaW5rX3Rj
b24odGxpbmspOw0KPiAgIAkJcmMgPSBDSUZTU01CVW5peFNldFBhdGhJbmZvKHhpZCwgcFRj
b24sIGZ1bGxfcGF0aCwgYXJncywNCj4gLQkJCQkgICAgY2lmc19zYi0+bG9jYWxfbmxzLA0K
PiAtCQkJCSAgICBjaWZzX3JlbWFwKGNpZnNfc2IpKTsNCj4gKwkJCQkJICAgIGNpZnNfc2It
PmxvY2FsX25scywNCj4gKwkJCQkJICAgIGNpZnNfcmVtYXAoY2lmc19zYikpOw0KPiAgIAkJ
Y2lmc19wdXRfdGxpbmsodGxpbmspOw0KPiAgIAl9DQo+ICAgDQo+IEBAIC0zMjY0LDggKzMy
NzQsNyBAQCBjaWZzX3NldGF0dHJfbm91bml4KHN0cnVjdCBkZW50cnkgKmRpcmVudHJ5LCBz
dHJ1Y3QgaWF0dHIgKmF0dHJzKQ0KPiAgIAlzdHJ1Y3QgaW5vZGUgKmlub2RlID0gZF9pbm9k
ZShkaXJlbnRyeSk7DQo+ICAgCXN0cnVjdCBjaWZzX3NiX2luZm8gKmNpZnNfc2IgPSBDSUZT
X1NCKGlub2RlLT5pX3NiKTsNCj4gICAJc3RydWN0IGNpZnNJbm9kZUluZm8gKmNpZnNJbm9k
ZSA9IENJRlNfSShpbm9kZSk7DQo+IC0Jc3RydWN0IGNpZnNGaWxlSW5mbyAqd2ZpbGU7DQo+
IC0Jc3RydWN0IGNpZnNfdGNvbiAqdGNvbjsNCj4gKwlzdHJ1Y3QgY2lmc0ZpbGVJbmZvICpj
ZmlsZSA9IE5VTEw7DQo+ICAgCWNvbnN0IGNoYXIgKmZ1bGxfcGF0aDsNCj4gICAJdm9pZCAq
cGFnZSA9IGFsbG9jX2RlbnRyeV9wYXRoKCk7DQo+ICAgCWludCByYyA9IC1FQUNDRVM7DQo+
IEBAIC0zMjg1LDYgKzMyOTQsOSBAQCBjaWZzX3NldGF0dHJfbm91bml4KHN0cnVjdCBkZW50
cnkgKmRpcmVudHJ5LCBzdHJ1Y3QgaWF0dHIgKmF0dHJzKQ0KPiAgIAlpZiAocmMgPCAwKQ0K
PiAgIAkJZ290byBjaWZzX3NldGF0dHJfZXhpdDsNCj4gICANCj4gKwlpZiAoYXR0cnMtPmlh
X3ZhbGlkICYgQVRUUl9GSUxFKQ0KPiArCQljZmlsZSA9IGF0dHJzLT5pYV9maWxlLT5wcml2
YXRlX2RhdGE7DQo+ICsNCj4gICAJZnVsbF9wYXRoID0gYnVpbGRfcGF0aF9mcm9tX2RlbnRy
eShkaXJlbnRyeSwgcGFnZSk7DQo+ICAgCWlmIChJU19FUlIoZnVsbF9wYXRoKSkgew0KPiAg
IAkJcmMgPSBQVFJfRVJSKGZ1bGxfcGF0aCk7DQo+IEBAIC0zMzExLDI1ICszMzIzLDI0IEBA
IGNpZnNfc2V0YXR0cl9ub3VuaXgoc3RydWN0IGRlbnRyeSAqZGlyZW50cnksIHN0cnVjdCBp
YXR0ciAqYXR0cnMpDQo+ICAgDQo+ICAgCXJjID0gMDsNCj4gICANCj4gLQlpZiAoKGF0dHJz
LT5pYV92YWxpZCAmIEFUVFJfTVRJTUUpICYmDQo+IC0JICAgICEoY2lmc19zYi0+bW50X2Np
ZnNfZmxhZ3MgJiBDSUZTX01PVU5UX05PU1NZTkMpKSB7DQo+IC0JCXJjID0gY2lmc19nZXRf
d3JpdGFibGVfZmlsZShjaWZzSW5vZGUsIEZJTkRfV1JfQU5ZLCAmd2ZpbGUpOw0KPiAtCQlp
ZiAoIXJjKSB7DQo+IC0JCQl0Y29uID0gdGxpbmtfdGNvbih3ZmlsZS0+dGxpbmspOw0KPiAt
CQkJcmMgPSB0Y29uLT5zZXMtPnNlcnZlci0+b3BzLT5mbHVzaCh4aWQsIHRjb24sICZ3Zmls
ZS0+ZmlkKTsNCj4gLQkJCWNpZnNGaWxlSW5mb19wdXQod2ZpbGUpOw0KPiAtCQkJaWYgKHJj
KQ0KPiAtCQkJCWdvdG8gY2lmc19zZXRhdHRyX2V4aXQ7DQo+IC0JCX0gZWxzZSBpZiAocmMg
IT0gLUVCQURGKQ0KPiArCWlmIChhdHRycy0+aWFfdmFsaWQgJiBBVFRSX01USU1FKSB7DQo+
ICsJCXJjID0gY2lmc19maWxlX2ZsdXNoKHhpZCwgaW5vZGUsIGNmaWxlKTsNCj4gKwkJaWYg
KHJjKQ0KPiAgIAkJCWdvdG8gY2lmc19zZXRhdHRyX2V4aXQ7DQo+IC0JCWVsc2UNCj4gLQkJ
CXJjID0gMDsNCj4gICAJfQ0KPiAgIA0KPiAgIAlpZiAoYXR0cnMtPmlhX3ZhbGlkICYgQVRU
Ul9TSVpFKSB7DQo+IC0JCXJjID0gY2lmc19zZXRfZmlsZV9zaXplKGlub2RlLCBhdHRycywg
eGlkLCBmdWxsX3BhdGgsIGRpcmVudHJ5KTsNCj4gKwkJcmMgPSBjaWZzX2ZpbGVfc2V0X3Np
emUoeGlkLCBkaXJlbnRyeSwgZnVsbF9wYXRoLA0KPiArCQkJCQljZmlsZSwgYXR0cnMtPmlh
X3NpemUpOw0KPiAgIAkJaWYgKHJjICE9IDApDQo+ICAgCQkJZ290byBjaWZzX3NldGF0dHJf
ZXhpdDsNCj4gKwkJLyoNCj4gKwkJICogVGhlIG1hbiBwYWdlIG9mIHRydW5jYXRlIHNheXMg
aWYgdGhlIHNpemUgY2hhbmdlZCwNCj4gKwkJICogdGhlbiB0aGUgc3RfY3RpbWUgYW5kIHN0
X210aW1lIGZpZWxkcyBmb3IgdGhlIGZpbGUNCj4gKwkJICogYXJlIHVwZGF0ZWQuDQo+ICsJ
CSAqLw0KPiArCQlhdHRycy0+aWFfY3RpbWUgPSBhdHRycy0+aWFfbXRpbWUgPSBjdXJyZW50
X3RpbWUoaW5vZGUpOw0KPiArCQlhdHRycy0+aWFfdmFsaWQgfD0gQVRUUl9DVElNRSB8IEFU
VFJfTVRJTUU7DQo+ICAgCX0NCj4gICANCj4gICAJaWYgKGF0dHJzLT5pYV92YWxpZCAmIEFU
VFJfVUlEKQ0KPiBAQCAtMzQ1OSw2ICszNDcwLDEzIEBAIGNpZnNfc2V0YXR0cihzdHJ1Y3Qg
bW50X2lkbWFwICppZG1hcCwgc3RydWN0IGRlbnRyeSAqZGlyZW50cnksDQo+ICAgDQo+ICAg
CWlmICh1bmxpa2VseShjaWZzX2ZvcmNlZF9zaHV0ZG93bihjaWZzX3NiKSkpDQo+ICAgCQly
ZXR1cm4gLUVJTzsNCj4gKwkvKg0KPiArCSAqIEF2b2lkIHNldHRpbmcgW2NtXXRpbWUgd2l0
aCBPX1RSVU5DIHRvIHByZXZlbnQgdGhlIHNlcnZlciBmcm9tDQo+ICsJICogZGlzYWJsaW5n
IGF1dG9tYXRpYyB0aW1lc3RhbXAgdXBkYXRlcyBhcyBzcGVjaWZpZWQgaW4NCj4gKwkgKiBN
Uy1GU0EgMi4xLjQuMTcuDQo+ICsJICovDQo+ICsJaWYgKGF0dHJzLT5pYV92YWxpZCAmIEFU
VFJfT1BFTikNCj4gKwkJcmV0dXJuIDA7DQo+ICAgDQo+ICAgCWRvIHsNCj4gICAjaWZkZWYg
Q09ORklHX0NJRlNfQUxMT1dfSU5TRUNVUkVfTEVHQUNZDQoNCg==

--------------hEuMvHhzTHYu0Zdmc3ZycHnM--

--------------I4L0JSw4Vi5wuhv9fqvNRhXa
Content-Type: application/pgp-signature; name="OpenPGP_signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="OpenPGP_signature.asc"

-----BEGIN PGP SIGNATURE-----

wsF5BAABCAAjFiEE+uLGCIokJSBRxVnkqh6bcSY5nkYFAmjj9kMFAwAAAAAACgkQqh6bcSY5nkZo
tQ//Y0Ptp97kAQfMza/k7eJfJVOs0NOPDSwBWKHdsfZzo6zcS0gObdXLtXzZy0/53rmPmOBBwP8P
xy0leJmsrzmPsZaE6rrJQnTpyGxt7JO//k+adIcWmR6U7h2K+wgxhuDfJZKbYEzT4o1up797hAJC
APjOo45PkoRej1wqe5vkojz9dOSnZk7an6GEFtGJcwuoBeR5fWKz6rscu8hcSFaZAhCuZLT26sx/
y2NtGufLCKiV9ltQBBj/wFQqu5qtR9MYegsG4TYHO//B79EjqfQIJz8WWs/ZCVMR/gbI23OWEFX4
PAbG1XP+3QOOeXOT8Jiq0utfrSrMWA3d1fS+ScpPL2QFh29/WJRg/wRiHyOMKzwRRAlCPy3RbXO6
pxbZDuq3Ul7w11cq4WLeXukZkDbehdeoEyX1HXlUgXSPtjE6tE/uUrJHeZdYfYD0g63mru1VHWbi
WCVipdEDnyCbHTP4Z/eJfoi6gLyC+BiXfdJEb3pbGEGXqcTtCp+JX9fSSXXiU23WAeFBZLxNJXzD
gEPEq6gWfnZp1roM860Z+LgTf60Q8psJMUwHzBwm4es9wMh041HwjSr0oi5E+QgLyw81Eu5ZSAS7
bJdXcd7D9Qyr+RSKKbhSaImInYN0gFb7zirAwnY3eGFkPsuWs/DNEvxXP++GMqSP+YGNeqZe2xgE
4T0=
=/Z7c
-----END PGP SIGNATURE-----

--------------I4L0JSw4Vi5wuhv9fqvNRhXa--

